webpackJsonpjwplayer([5],{109:function(a,b,c){var d,e;d=[c(81),c(45),c(55),c(48),c(62),c(46),c(47),c(110)],e=function(a,b,c,d,e,f,g,h){function i(a){function i(){W&&this.state===e.LOADING&&this.setState(e.PLAYING)}function j(a,b){var c,e,f;switch(a){case"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":case"edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":return d.isIE()?null:(T="widevine",c="com.widevine.alpha",e=S.widevine,f=e?e.url:"",f||(console.log("No licensing server specified for widevine. Defaulting to proxy."),f="http://widevine-proxy.appspot.com/proxy"),[{keySystem:c,licenseServerUrl:f,licensePreProcessor:function(a){e&&e.customData&&(a.headers.customData=e.customData)}}]);case"urn:mpeg:dash:mp4protection:2011":c="org.w3.clearkey",e=S.clearkey;var g=h.util.Uint8ArrayUtils,i=e?e.key:null,j=b.getAttribute("cenc:default_KID");if(j=j?j.replace(/-/g,""):null,!i||!j)break;j=g.fromHex(j),i=g.fromHex(i);var k={kty:"oct",kid:g.toBase64(j,!1),k:g.toBase64(i,!1)},l={keys:[k]},m=JSON.stringify(l),n={initData:j,initDataType:"webm"};return f="data:application/json;base64,"+window.btoa(m),[{keySystem:c,licenseServerUrl:f,initData:n}];case"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":case"9a04f079-9840-4286-ab92-e65be0885f95":return d.isIE()?(T="playready",c="com.microsoft.playready",e=S.playready,f=e?e.url:"",f||(console.log("No licensing server specified for microsoft. Defaulting to proxy."),f="http://microsoft-proxy.appspot.com/proxy"),[{keySystem:c,licenseServerUrl:f,licensePreProcessor:function(a){e&&e.customData&&(a.headers.customData=e.customData)}}]):null;default:return console.log("Unrecognized scheme: "+a,b),null}}function k(a){console.error(a);var b="Unknown playback error";V.trigger(f.JWPLAYER_MEDIA_ERROR,{message:"Error playing file:"+b})}function l(a){switch(a.contentType){case"video":var b={level:{index:V.currentQuality,label:V.currentQuality?a.size.height+"p":"Auto",bitrate:a.bandwidth,width:a.size.width,height:a.size.height},type:"visualQuality"};Y?(b.reason="initial choice",b.mode="auto",Y=!1):a.currentTarget.c.enableAdaptation?b.reason=b.mode="auto":(b.reason="api",b.mode="manual"),V.trigger("visualQuality",b)}}function m(){return this.levels}function n(){return this.currentQuality}function o(a){var b=new h.player.Player(a);return b.addEventListener("error",k),b.addEventListener("adaptation",l),b}function p(a){W&&(d.isAndroid()||a.preload&&"none"!==a.preload)&&r(a)}function q(a){W&&(this.setState(e.LOADING),R!==a?(T=null,Y=!0,r(a)):(Q.currentTime=0,Q.play()))}function r(a){R=a;var b=a.sources[0].file,c=a.starttime;S=a.sources[0].drm||{};var d=new h.util.EWMABandwidthEstimator,e=new h.player.DashVideoSource(b,j,d),f=U.load(e);f.then(s.bind(V)),c&&f.then(function(){this.seek(c)}.bind(V))}function s(){if(W){var a=U.getVideoTracks(),b=U.getAudioTracks();a.length>0?t(a,"video"):t(b,"audio"),V.trigger(f.JWPLAYER_MEDIA_BUFFER_FULL)}}function t(a,c){V.currentQuality=0,V.levels=b.map(a,function(a){var b={contentType:c,label:null,level_id:a.id};return a.height?b.label=a.height+"p":b.label=Math.round(a.bandwidth/1e3)+"kbps",b}),a.length>1&&V.levels.unshift({label:"Auto",level_id:"auto"}),V.trigger(f.JWPLAYER_MEDIA_LEVELS,{levels:V.levels,currentQuality:V.currentQuality})}function u(){return U.isLive()?1/0:Q.duration}function v(){W&&V.trigger(f.JWPLAYER_MEDIA_META,{duration:u(),height:Q.videoHeight,width:Q.videoWidth,drm:T})}function w(){V.setState(e.COMPLETE),X=!1,V.trigger(f.JWPLAYER_MEDIA_COMPLETE)}function x(a,b){return W?g.trigger.call(this,a,b):void 0}function y(){var a=Q;W=!1,U.destroy(),Q=a}function z(){W=!0,U=o(Q),X&&w()}function A(){return X}function B(a){Q.muted=a}function C(){this.setState(e.PAUSED),Q.pause()}function D(){this.setState(e.BUFFERING),Q.play(),this.setVisibility(!0)}function E(a){Q.currentTime=a,this.trigger(f.JWPLAYER_MEDIA_SEEK,{position:Q.currentTime,offset:a})}function F(a){a=!!a,a?c.style(O,{visibility:"visible",opacity:1}):c.style(O,{visibility:"",opacity:0})}function G(){U.unload(),O===Q.parentNode&&O.removeChild(Q)}function H(){Q.pause(),this.setState(e.IDLE)}function I(a){O=a,O.appendChild(Q)}function J(){return O}function K(a){if(a=parseInt(a,10),!(this.currentQuality===a||0>a||a>=this.levels.length)){if(this.currentQuality=a,this.trigger(f.JWPLAYER_MEDIA_LEVEL_CHANGED,{currentQuality:this.currentQuality,levels:this.levels}),0===a)U.configure({enableAdaptation:!0});else{var b=this.levels[a].level_id;U.configure({enableAdaptation:!1});var c;"audio"===this.levels[a].contentType?(c=L(U.getAudioTracks()),c&&c.id===b||(this.setState(e.LOADING),U.selectAudioTrack(b))):(c=L(U.getVideoTracks()),c&&c.id===b||(this.setState(e.LOADING),U.selectVideoTrack(b)))}Q.play()}}function L(a){return b.find(a,function(a){return a.active})}function M(){if(W){var a=Q.currentTime;if(Math.abs(a-this.position)<1&&V.state===e.BUFFERING&&V.setState(e.PLAYING),this.position=a,V.trigger(f.JWPLAYER_MEDIA_TIME,{position:a,duration:u(),quality:1}),a>Q.duration-.1&&Q.duration>1){if(X=!0,V.trigger(f.JWPLAYER_MEDIA_BEFORECOMPLETE),!W)return;w()}}}function N(a){Q.volume=a/100}var O,P=document.getElementById(a),Q=P?P.querySelector("video"):void 0;Q=Q||document.createElement("video");var R,S,T,U=o(Q),V=this,W=!0,X=!1,Y=!0;this.position=0,this.levels=[],this.currentQuality=-1,b.extend(this,g,{init:p,load:q,mute:B,pause:C,getQualityLevels:m.bind(this),getCurrentQuality:n.bind(this),play:D,seek:E,remove:G,setContainer:I,getContainer:J,setCurrentQuality:K.bind(this),setVisibility:F,stop:H,volume:N,trigger:x,attachMedia:z,detachMedia:y,checkComplete:A,supportsFullscreen:b.constant(!0),getName:b.constant({name:"shaka"})}),Q.addEventListener("loadedmetadata",v.bind(this)),Q.addEventListener("timeupdate",M.bind(this)),Q.addEventListener("playing",i.bind(this))}return h.polyfill.installAll(),i.getName=b.constant({name:"shaka"}),{register:function(a){a.api.registerProvider(i)}}}.apply(b,d),!(void 0!==e&&(a.exports=e))},110:function(a,b,c){var d;!function(){var e={};(function(a){function b(a,b){var c=a.split("."),d=Te;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d=d[e]?d[e]:d[e]={}:d[e]=b}function c(a,b){function c(){}c.prototype=b.prototype,a.cc=b.prototype,a.prototype=new c,a.prototype.constructor=a,a.bc=function(a,c,d){return b.prototype[c].apply(a,Array.prototype.slice.call(arguments,2))}}function d(){}function e(a){var b=console[a];b?b.bind||(console[a]=function(){b.apply(console,arguments)}):console[a]=function(){}}function f(a){Ve[a]={na:Ue(),end:NaN}}function g(a){(a=Ve[a])&&(a.end=Ue())}function h(a){return(a=Ve[a])&&a.end?a.end-a.na:NaN}function i(a,b,c){this.id=a,this.bandwidth=b||0,this.lang=c||"unknown",this.active=!1}function j(){this.minBandwidth=this.maxBandwidth=this.maxWidth=this.minHeight=this.maxHeight=null}function k(){this.fontSize="100%",this.fontColor=We,this.fontOpacity=Ye,this.backgroundColor=Xe,this.backgroundOpacity=Ye,this.fontEdge=Ze}function l(a){var b=[];b.push("font-size: "+a.fontSize),b.push("color: "+m(a.fontColor,a.fontOpacity)),b.push("background-color: "+m(a.backgroundColor,a.backgroundOpacity));for(var c=[],d=0;d<a.fontEdge.length;++d){var e=a.fontEdge[d].slice(3,6);c.push(m(a.fontEdge[d].slice(0,3),a.fontOpacity)+" "+e.join("px ")+"px")}return b.push("text-shadow: "+c.join(",")),b.join("; ")}function m(a,b){return"rgba("+a.concat(b).join(",")+")"}function n(a,b){this.id=a,this.lang=b||"unknown",this.enabled=this.active=!1}function o(a,b,c,d){this.id=a,this.bandwidth=b||0,this.width=c||0,this.height=d||0,this.active=!1}function p(a,b){var c=a.width*a.height,d=b.width*b.height;return d>c?-1:c>d?1:a.bandwidth<b.bandwidth?-1:a.bandwidth>b.bandwidth?1:0}function q(){var b="CustomEvent"in a;if(b)try{new CustomEvent("")}catch(c){b=!1}b||(a.CustomEvent=r)}function r(a,b){var c=document.createEvent("CustomEvent"),d=b||{bubbles:!1,cancelable:!1,detail:null};return c.initCustomEvent(a,!!d.bubbles,!!d.cancelable,d.detail),c}function s(){var a=Element.prototype;a.requestFullscreen=a.requestFullscreen||a.mozRequestFullScreen||a.msRequestFullscreen||a.webkitRequestFullscreen,a=Document.prototype,a.exitFullscreen=a.exitFullscreen||a.mozCancelFullScreen||a.msExitFullscreen||a.webkitExitFullscreen,"fullscreenElement"in document||Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement}}),document.addEventListener("webkitfullscreenchange",t),document.addEventListener("webkitfullscreenerror",t),document.addEventListener("mozfullscreenchange",t),document.addEventListener("mozfullscreenerror",t),document.addEventListener("MSFullscreenChange",t),document.addEventListener("MSFullscreenError",t)}function t(a){var b=a.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),b=new Event(b,a);a.target.dispatchEvent(b)}function u(){return Promise.reject(Error("The key system specified is not supported."))}function v(a){return null==a?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function w(){throw new TypeError("Illegal constructor.")}function x(){throw new TypeError("Illegal constructor.")}function y(a){if(this.c=[],this.b=[],this.ba=$e,a)try{a(this.W.bind(this),this.a.bind(this))}catch(b){this.a(b)}}function z(){a.Promise||(a.Promise=y,a.Promise.resolve=A,a.Promise.reject=B,a.Promise.all=C,a.Promise.race=D,F=a.setImmediate?function(b){a.setImmediate(b)}:function(b){a.setTimeout(b,0)})}function A(a){var b=new y;return b.W(a),b}function B(a){var b=new y;return b.a(a),b}function C(a){function b(a,b,c){a.ba==$e&&(e[b]=c,d++,d==e.length&&a.W(e))}var c=new y;if(!a.length)return c.W([]),c;for(var d=0,e=Array(a.length),f=c.a.bind(c),g=0;g<a.length;++g)a[g].then?a[g].then(b.bind(null,c,g),f):b(c,g,a[g]);return c}function D(a){for(var b=new y,c=b.W.bind(b),d=b.a.bind(b),e=0;e<a.length;++e)a[e].then?a[e].then(c,d):c(a[e]);return b}function E(a,b,c){F(function(){if(c&&"function"==typeof c){try{var a=c(this.wa)}catch(d){return void b.a(d)}a instanceof y?a==b?b.a(new TypeError("Chaining cycle detected")):a.then(b.W.bind(b),b.a.bind(b)):b.W(a)}else 1==this.ba?b.W(this.wa):b.a(this.wa)}.bind(a))}function F(){}function G(){var a=HTMLVideoElement.prototype;!a.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in a&&(a.getVideoPlaybackQuality=H)}function H(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function I(a,b){for(var c=[],d=0;d<a.length;++d){for(var e=!1,f=0;f<c.length&&!(e=b?b(a[d],c[f]):a[d]===c[f]);++f);e||c.push(a[d])}return c}function J(){return Date.now()+af}function K(a){this.b=a,this.c=0==bf,this.a=0}function L(a){return a.a<a.b.byteLength}function M(a){var b=a.b.getUint8(a.a);return a.a+=1,b}function N(a){var b=a.b.getUint32(a.a,a.c);return a.a+=4,b}function O(a){var b,c;if(a.c?(b=a.b.getUint32(a.a,!0),c=a.b.getUint32(a.a+4,!0)):(c=a.b.getUint32(a.a,!1),b=a.b.getUint32(a.a+4,!1)),c>2097151)throw new RangeError("DataViewReader: Overflow reading 64-bit value.");return a.a+=8,c*Math.pow(2,32)+b}function P(a){if(a.a+16>a.b.byteLength)throw new RangeError("DataViewReader: Read past end of DataView.");var b=new Uint8Array(a.b.buffer,a.a,16);return a.a+=16,b}function Q(a,b){if(a.a+b>a.b.byteLength)throw new RangeError("DataViewReader: Skip past end of DataView.");a.a+=b}function R(a){this.b=a,this.a=new K(a),_e||(_e=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])])}function S(a){var b;if(b=T(a),7<b.length)throw new RangeError("EbmlParser: EBML ID must be at most 7 bytes.");for(var c=0,d=0;d<b.length;d++)c=256*c+b[d];b=c,c=T(a);a:{for(d=0;d<_e.length;d++)if(Za(c,_e[d])){d=!0;break a}d=!1}if(d)c=a.b.byteLength-a.a.a;else{if(8==c.length&&224&c[1])throw new RangeError("EbmlParser: Variable sized integer value must be at most 53 bits.");for(var d=c[0]&(1<<8-c.length)-1,e=1;e<c.length;e++)d=256*d+c[e];c=d}return c=a.a.a+c<=a.b.byteLength?c:a.b.byteLength-a.a.a,d=new DataView(a.b.buffer,a.b.byteOffset+a.a.a,c),Q(a.a,c),new U(b,d)}function T(a){var b,c=M(a.a);for(b=1;8>=b&&!(c&1<<8-b);b++);if(b>8)throw new RangeError("EbmlParser: Variable sized integer must fit within 8 bytes.");var d=new Uint8Array(b);for(d[0]=c,c=1;b>c;c++)d[c]=M(a.a);return d}function U(a,b){this.id=a,this.a=b}function V(a){if(8<a.a.byteLength)throw new RangeError("EbmlElement: Unsigned integer has too many bytes.");if(8==a.a.byteLength&&224&a.a.getUint8(0))throw new RangeError("EbmlParser: Unsigned integer must be at most 53 bits.");for(var b=0,c=0;c<a.a.byteLength;c++)var d=a.a.getUint8(c),b=256*b+d;return b}function W(a){this.c=Math.exp(Math.log(.5)/a),this.a=this.b=0}function X(a){return a.b/(1-Math.pow(a.c,a.a))}function Y(a){var b,c=new CustomEvent(a.type,{detail:a.detail,bubbles:!!a.bubbles});for(b in a)b in c||(c[b]=a[b]);return c}function Z(a){return new CustomEvent("error",{detail:a,bubbles:!0})}function $(a,b,c){return _(b),_(c),c==b||a>=df&&c==b.split("-")[0]||a>=ef&&c.split("-")[0]==b.split("-")[0]}function _(a){a=a.toLowerCase().split("-");var b=ff[a[0]];return b&&(a[0]=b),a.join("-")}function aa(a){return Object.keys(a).map(function(b){return a[b]})}function ba(a,b){return ea(a,b,"boolean")}function ca(a,b){var c=ea(a,b,"number");if(null==c)return null;if(isNaN(c)||c==Number.NEGATIVE_INFINITY||c==Number.POSITIVE_INFINITY)throw new RangeError("'"+b+"' must be finite.");if(0>c)throw new RangeError("'"+b+"' must be >= 0");return c}function da(a,b){return ea(a,b,"string")}function ea(a,b,c){if(a=a[b],null==a)return null;if(typeof a!=c)throw new TypeError("'"+b+"' must be a "+c+".");return a}function fa(a,b,c){if(a=a[b],null==a)return null;if(!(a instanceof c))throw new TypeError("'"+b+"' must be an instance of "+c.name+".");return a}function ga(){this.a={}}function ha(a){var b,c=[];for(b in a.a)c.push.apply(c,a.a[b]);return c}function ia(a,b,c){if(a=a.a[b])for(b=0;b<a.length;++b)a[b]==c&&(a.splice(b,1),--b)}function ja(a){var b,c=[];for(b in a.a)c.push(b);return c}function ka(){this.a=new ga}function la(a,b,c,d){b=new na(b,c,d),a.a.push(c,b)}function ma(a){for(var b=ha(a.a),c=0;c<b.length;++c)b[c].sa();a.a.a={}}function na(a,b,c){this.target=a,this.type=b,this.a=c,this.target.addEventListener(b,c,!1)}function oa(a){this.ya=new ga,this.v=a}function pa(a,b){b.currentTarget=a;for(var c=a.ya.get(b.type)||[],d=0;d<c.length;++d){var e=c[d];try{e.handleEvent?e.handleEvent(b):e.call(a,b)}catch(f){}}return a.v&&b.bubbles&&pa(a.v,b),b.defaultPrevented}function qa(){oa.call(this,null),this.a=new W(3),this.c=new W(10),this.b=0}function ra(){var a,b,c=new Promise(function(c,d){a=c,b=d});return c.resolve=a,c.reject=b,c.destroy=ra.prototype.destroy,c}function sa(a){return a.split("").reduce(function(a,b,c){return a+(c&&0==c%4?" "+b:b)})}function ta(){this.g=new ra,this.f=!1,this.a=null,this.b=[],this.c=null}function ua(a,b){if(a.f)throw Error("Cannot append to a running task!");a.b.push(b)}function va(a,b){var c,d=a.b[0](b);d?(c=d[0],a.c=d[1]):(c=Promise.resolve(),a.c=null),c.then(xa(a,function(a){this.a?(this.b=[],this.c=null,wa(this)):(this.b.shift(),this.b.length?va(this,a):(this.g.resolve(a),this.c=null))}))["catch"](xa(a,function(a){this.b=[],this.c=null,this.a?wa(this):this.g.reject(a)}))}function wa(b){var c=Error("Task aborted.");c.type="aborted",b.g.reject(c),a.setTimeout(function(){this.a.resolve(),this.a=null}.bind(b),5)}function xa(a,b){return b.bind(a)}function ya(a,b){oa.call(this,b),this.a=null,this.h=a}function za(b){if(!a.indexedDB)return b=Error("Persistant storage requires IndexedDB support."),b.type="storage",Promise.reject(b);if(b.a)return b=Error("A database connection is already open."),b.type="storage",Promise.reject(b);var c=new ra,d=a.indexedDB.open("content_database",1);return d.onupgradeneeded=xa(b,function(a){this.a=a.target.result,Ba(this,"group_store",{keyPath:"group_id"}),Ba(this,"stream_index_store",{keyPath:"stream_id"}),a=Ba(this,"content_store",{autoIncrement:"true"}),a.createIndex("segment",["stream_id","segment_id"],{unique:!0}),a.createIndex("stream","stream_id",{unique:!1})}),d.onsuccess=xa(b,function(a){this.a=a.target.result,c.resolve()}),d.onerror=function(){c.reject(d.error)},c}function Aa(a){a.a&&(a.a.close(),a.a=null)}function Ba(a,b,c){return a.a.objectStoreNames.contains(b)&&a.a.deleteObjectStore(b),a.a.createObjectStore(b,c)}function Ca(a){return Fa(a,"content_store")}function Da(a){return Fa(a,"stream_index_store")}function Ea(a){return Fa(a,"group_store")}function Fa(a,b){return a.a.transaction([b],a.h).objectStore(b)}function Ga(a,b){var c=new ra,d=a.get(b);return d.onerror=function(){c.reject(d.error)},d.onsuccess=function(){if(d.result)c.resolve(d.result);else{var a=Error("Item not found.");a.type="storage",c.reject(a)}},c}function Ha(){ya.call(this,"readonly",null)}function Ia(a){var b=new ra,c=[],d=Ea(a).openCursor();return d.onerror=function(){b.reject(d.error)},d.onsuccess=function(a){(a=a.target.result)?(c.push(a.key),a["continue"]()):b.resolve(c)},b}function Ja(a,b){return Ga(Ea(a),b).then(xa(a,function(a){return a.session_ids=I(a.session_ids),a.hasOwnProperty("duration")||a.hasOwnProperty("key_system")?Promise.resolve(a):Ka(this,a.stream_ids[0]).then(function(b){return a.duration=b.duration,a.key_system=b.key_system,a.license_server=b.license_server,a.with_credentials=b.with_credentials,a.distinctive_identifier=b.distinctive_identifier,a.audio_robustness=b.audio_robustness,a.video_robustness=b.video_robustness,Promise.resolve(a)})}))}function Ka(a,b){return Ga(Da(a),b)}function La(a,b,c){return Ga(Ca(a).index("segment"),[b,c]).then(function(a){return Promise.resolve(a.content)})}function Ma(a,b,c){MediaSource.isTypeSupported(b),b=a.addSourceBuffer(b),this.v=a,this.c=b,this.l=c,this.i=new ka,this.g=null,this.b=[],this.w=0,this.f=this.a=null,this.u=0,la(this.i,this.c,"updateend",this.B.bind(this))}function Na(a,b){for(var c=a.c.buffered,d=0;d<c.length;++d){var e=c.start(d)-gf,f=c.end(d)+gf;if(b>=e&&f>=b)return c.end(d)-b}return 0}function Oa(a,b,c,d){if(a.a)return a=Error("Cannot fetch ("+a.j+"): previous operation not complete."),a.type="stream",Promise.reject(a);a.a=new ta,c!=a.c.timestampOffset&&(a.c.timestampOffset=c),"idb"!=b.url.b[0].P||a.g||(a.g=new Ha,ua(a.a,function(){return[za(this.g)]}.bind(a))),d&&ua(a.a,function(){return[Ta(this,d),this.h.bind(this)]}.bind(a)),ua(a.a,function(){var a=b.a?b.a-b.b:1,c=new tc;return c.a=3,c.h=1e3*a,c.c=1e3*this.u,c.i=this.g,[Bc(b.url,c,this.l),zc.prototype.g.bind(b.url)]}.bind(a)),ua(a.a,xa(a,function(a){return this.l.getBandwidth(),[Ta(this,a),this.h.bind(this)]}));var e=0==a.c.buffered.length&&0==a.b.length,f=null;return ua(a.a,function(){if(0==this.c.buffered.length){var a=Error("Failed to buffer segment ("+this.j+").");return a.type="stream",[Promise.reject(a)]}e&&(a=b.b,f=this.c.buffered.start(0)-a),a=Mc(this.b,b.b),a>=0?this.b.splice(a+1,0,b):this.b.push(b)}.bind(a)),Sa(a).then(function(){return Promise.resolve(f)}.bind(a))}function Pa(a){return a.a?(a=Error("Cannot clear ("+a.j+"): previous operation not complete."),a.type="stream",Promise.reject(a)):(a.a=new ta,ua(a.a,function(){var a;a:if(0==this.c.buffered.length)a=Promise.resolve();else{try{this.c.remove(0,Number.POSITIVE_INFINITY)}catch(b){a=Promise.reject(b);break a}this.b=[],a=this.f=new ra}return[a,this.h.bind(this)]}.bind(a)),Sa(a))}function Qa(a,b){if(a.a){var c=Error("Cannot clearAfter ("+a.j+"): previous operation not complete.");return c.type="stream",Promise.reject(c)}return a.a=new ta,ua(a.a,function(){return[Ua(this,b),this.h.bind(this)]}.bind(a)),Sa(a)}function Ra(a){return a.a?(a=a.a,a.a?a=a.a:a.f?(a.c&&a.c(),a.a=new ra,a=a.a):(a.f=!0,a=Promise.resolve())):a=Promise.resolve(),a}function Sa(a){return a.a.start(),a.a.g.then(xa(a,function(){this.a=null}))["catch"](xa(a,function(a){return this.a=null,Promise.reject(a)}))}function Ta(a,b){try{a.c.appendBuffer(b)}catch(c){return Promise.reject(c)}return a.f=new ra,a.f}function Ua(a,b){if(0==a.c.buffered.length)return Promise.resolve();var c=Mc(a.b,b);if(-1==c||c==a.b.length-1)return Promise.resolve();try{a.c.remove(a.b[c+1].b,Number.POSITIVE_INFINITY)}catch(d){return Promise.reject(d)}return a.b=a.b.slice(0,c+1),a.f=new ra,a.f}function Va(a){return String.fromCharCode.apply(null,a)}function Wa(a){for(var b=new Uint8Array(a.length),c=0;c<a.length;++c)b[c]=a.charCodeAt(c);return b}function Xa(b){return Wa(a.atob(b.replace(/-/g,"+").replace(/_/g,"/")))}function Ya(a){for(var b="",c=0;c<a.length;++c){var d=a[c].toString(16);1==d.length&&(d="0"+d),b+=d}return b}function Za(a,b){if(!a&&!b)return!0;if(!a||!b||a.length!=b.length)return!1;for(var c=0;c<a.length;++c)if(a[c]!=b[c])return!1;return!0}function $a(){this.h=this.a="",this.i=!1,this.u=this.l=null,this.v=this.g=!1,this.j=this.f="",this.c=null,this.b=[]}function _a(a){var b=new $a;if(!a)return b;var c=da(a,"keySystem");if(null==c)throw Error("'keySystem' cannot be null.");b.a=c;var d=da(a,"licenseServerUrl");if(null!=d)b.h=d;else if(c)throw Error("For encrypted streaming content, 'licenseServerUrl' cannot be null or empty.");if(c=ba(a,"withCredentials"),null!=c&&(b.i=c),c=fa(a,"licensePostProcessor",Function),null!=c&&(b.l=c),c=fa(a,"licensePreProcessor",Function),null!=c&&(b.u=c),c=ba(a,"distinctiveIdentifierRequired"),null!=c&&(b.g=c),c=ba(a,"persistentStateRequired"),null!=c&&(b.v=c),c=da(a,"audioRobustness"),null!=c&&(b.f=c),c=da(a,"videoRobustness"),null!=c&&(b.j=c),c=fa(a,"serverCertificate",Uint8Array),null!=c&&(b.c=c),c=fa(a,"initData",Object)){if(a=fa(c,"initData",Uint8Array),null==a)throw Error("'initData.initData' cannot be null.");if(c=da(c,"initDataType"),null==c)throw Error("'initData.initDataType' cannot be null.");b.b.push({initData:new Uint8Array(a.buffer),initDataType:c})}return b}function ab(a,b){var c=a.b.concat(b.map(function(a){return{initData:new Uint8Array(a.initData.buffer),initDataType:a.initDataType}}));a.b=I(c,bb)}function bb(a,b){return a.initDataType==b.initDataType&&Za(a.initData,b.initData)}function cb(a,b){try{var c=new eb(a,b);return Promise.resolve(c)}catch(d){return Promise.reject(d)}}function db(a){var b=this.mediaKeys;return b&&b!=a&&gb(b,null),delete this.mediaKeys,(this.mediaKeys=a)&&gb(a,this),Promise.resolve()}function eb(a,b){this.a=this.keySystem=a;var c=!0;"org.w3.clearkey"==a&&(this.a="webkit-org.w3.clearkey",c=!1);var d,e=!1;d=document.getElementsByTagName("video"),d=d.length?d[0]:document.createElement("video");for(var f=0;f<b.length;++f){var g=b[f],h={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:g.initDataTypes,sessionTypes:["temporary"]},i=!1;if(g.audioCapabilities)for(var j=0;j<g.audioCapabilities.length;++j){var k=g.audioCapabilities[j];k.contentType&&(i=!0,d.canPlayType(k.contentType.split(";")[0],this.a)&&(h.audioCapabilities.push(k),e=!0))}if(g.videoCapabilities)for(j=0;j<g.videoCapabilities.length;++j)k=g.videoCapabilities[j],k.contentType&&(i=!0,d.canPlayType(k.contentType,this.a)&&(h.videoCapabilities.push(k),e=!0));if(i||(e=d.canPlayType("video/mp4",this.a)||d.canPlayType("video/webm",this.a)),"required"==g.persistentState&&(c?(h.persistentState="required",h.sessionTypes=["persistent-license"]):e=!1),e)return void(this.b=h)}throw c="Unsupported keySystem","org.w3.clearkey"!=a&&"com.widevine.alpha"!=a||(c="None of the requested configurations were supported."),c=Error(c),c.name="NotSupportedError",c.code=DOMException.NOT_SUPPORTED_ERR,c}function fb(a){this.g=a,this.b=null,this.a=new ka,this.c=[],this.f={}}function gb(a,b){a.b=b,ma(a.a),b&&(la(a.a,b,"webkitneedkey",a.Rb.bind(a)),la(a.a,b,"webkitkeymessage",a.Qb.bind(a)),la(a.a,b,"webkitkeyadded",a.Ob.bind(a)),la(a.a,b,"webkitkeyerror",a.Pb.bind(a)))}function hb(a,b){var c=a.f[b];return c?c:(c=a.c.shift())?(c.sessionId=b,a.f[b]=c):null}function ib(a,b,c){oa.call(this,null),this.f=a,this.h=!1,this.a=this.b=null,this.c=b,this.g=c,this.sessionId="",this.expiration=NaN,this.closed=new ra,this.keyStatuses=new mb}function jb(a,b,c){if(a.h)return Promise.reject(Error("The session is already initialized."));a.h=!0;var d;try{if("persistent-license"==a.g)if(c)d=Wa("LOAD_SESSION|"+c);else{var e=new Uint8Array(b);d=Wa("PERSISTENT|"+Va(e))}else d=new Uint8Array(b)}catch(f){return Promise.reject(f)}a.b=new ra;try{a.f.webkitGenerateKeyRequest(a.c,d)}catch(g){if("InvalidStateError"!=g.name)return a.b=null,Promise.reject(g);setTimeout(function(){try{this.f.webkitGenerateKeyRequest(this.c,d)}catch(a){this.b.reject(a),this.b=null}}.bind(a),10)}return a.b}function kb(a,b){a.keyStatuses.Ma(b);var c=Y({type:"keystatuseschange"});a.dispatchEvent(c)}function lb(a){this.b=a,this.a=0}function mb(){this.size=0,this.a=void 0}function nb(a){this.systemIds=[],this.cencKeyIds=[],this.a=[],a=new K(new DataView(a.buffer));try{for(;L(a);){var b=a.a,c=N(a),d=N(a);if(1==c?c=O(a):0==c&&(c=a.b.byteLength-b),1886614376!=d)Q(a,c-(a.a-b));else{var e=M(a);if(e>1)Q(a,c-(a.a-b));else{Q(a,3);var f=Ya(P(a)),g=[];if(e>0)for(var h=N(a),i=0;h>i;++i){var j=Ya(P(a));g.push(j)}var k=N(a);Q(a,k),this.cencKeyIds.push.apply(this.cencKeyIds,g),this.systemIds.push(f),this.a.push({start:b,end:a.a-1}),a.a!=b+c&&Q(a,c-(a.a-b))}}}}catch(l){}}function ob(a,b){try{var c=new pb(a,b);return Promise.resolve(c)}catch(d){return Promise.reject(d)}}function pb(a,b){this.keySystem=a;for(var c=!1,d=0;d<b.length;++d){var e=b[d],f={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:e.initDataTypes,sessionTypes:["temporary"]},g=!1;if(e.audioCapabilities)for(var h=0;h<e.audioCapabilities.length;++h){var i=e.audioCapabilities[h];if(i.contentType){var g=!0,j=i.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,j)&&(f.audioCapabilities.push(i),c=!0)}}if(e.videoCapabilities)for(h=0;h<e.videoCapabilities.length;++h)i=e.videoCapabilities[h],i.contentType&&(g=!0,j=i.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,j)&&(f.videoCapabilities.push(i),c=!0));if(g||(c=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),"required"==e.persistentState&&(f.persistentState="required",f.sessionTypes=["persistent-license"]),c)return void(this.a=f)}throw c=Error("Unsupported keySystem"),c.name="NotSupportedError",c.code=DOMException.NOT_SUPPORTED_ERR,c}function qb(a){var b=this.mediaKeys;return b&&b!=a&&sb(b,null),delete this.mediaKeys,(this.mediaKeys=a)?sb(a,this):Promise.resolve()}function rb(a){this.a=new MSMediaKeys(a),this.b=new ka}function sb(a,b){function c(){b.msSetMediaKeys(d.a),b.removeEventListener("loadedmetadata",c)}if(ma(a.b),!b)return Promise.resolve();la(a.b,b,"msneedkey",ub);var d=a;try{return 1<=b.readyState?b.msSetMediaKeys(a.a):b.addEventListener("loadedmetadata",c),Promise.resolve()}catch(e){return Promise.reject(e)}}function tb(a){oa.call(this,null),this.c=null,this.g=a,this.b=this.a=null,this.f=new ka,this.sessionId="",this.expiration=NaN,this.closed=new ra,this.keyStatuses=new yb}function ub(a){var b=a.initData;if(b){var c=new nb(b);if(1>=c.a.length)a=b;else{var d=[];for(a=0;a<c.a.length;a++)d.push(b.subarray(c.a[a].start,c.a[a].end+1));for(b=I(d,vb),a=c=0;a<b.length;a++)c+=b[a].length;for(c=new Uint8Array(c),a=d=0;a<b.length;a++)c.set(b[a],d),d+=b[a].length;a=c}}else a=b;a=Y({type:"encrypted",initDataType:"cenc",initData:a}),this.dispatchEvent(a)}function vb(a,b){return Za(a,b)}function wb(a,b){a.keyStatuses.Ma(b);var c=Y({type:"keystatuseschange"});a.dispatchEvent(c)}function xb(a){this.b=a,this.a=0}function yb(){this.size=0,this.a=void 0}function zb(){Navigator.prototype.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(HTMLMediaElement.prototype.webkitGenerateKeyRequest?(hf=new Uint8Array([0]),Navigator.prototype.requestMediaKeySystemAccess=cb,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=db,a.MediaKeys=fb,a.MediaKeySystemAccess=eb):a.MSMediaKeys?(jf=new Uint8Array([0]),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=qb,a.MediaKeys=rb,a.MediaKeySystemAccess=pb,Navigator.prototype.requestMediaKeySystemAccess=ob):(Navigator.prototype.requestMediaKeySystemAccess=u,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=v,a.MediaKeys=w,a.MediaKeySystemAccess=x))}function Ab(a){var b;a instanceof Ab?(Bb(this,a.P),this.ca=a.ca,this.S=a.S,Cb(this,a.ia),this.O=a.O,Db(this,a.a.clone()),this.aa=a.aa):a&&(b=String(a).match(kf))?(Bb(this,b[1]||"",!0),this.ca=Eb(b[2]||""),this.S=Eb(b[3]||"",!0),Cb(this,b[4]),this.O=Eb(b[5]||"",!0),Db(this,b[6]||"",!0),this.aa=Eb(b[7]||"")):this.a=new Hb(null)}function Bb(a,b,c){a.P=c?Eb(b,!0):b,a.P&&(a.P=a.P.replace(/:$/,""))}function Cb(a,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);a.ia=b}else a.ia=null}function Db(a,b,c){b instanceof Hb?a.a=b:(c||(b=Fb(b,of)),a.a=new Hb(b))}function Eb(a,b){return a?b?decodeURI(a):decodeURIComponent(a):""}function Fb(a,b,c){return"string"==typeof a?(a=encodeURI(a).replace(b,Gb),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Gb(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(15&a).toString(16)}function Hb(a){this.b=a||null}function Ib(a,b,c){if(!a.a&&(a.a={},a.c=0,a.b))for(var d=a.b.split("&"),e=0;e<d.length;e++){var f=d[e].indexOf("="),g=null,h=null;f>=0?(g=d[e].substring(0,f),h=d[e].substring(f+1)):g=d[e],g=decodeURIComponent(g.replace(/\+/g," ")),h=h||"",Ib(a,g,decodeURIComponent(h.replace(/\+/g," ")))}a.b=null,(d=a.a.hasOwnProperty(b)&&a.a[b])||(a.a[b]=d=[]),d.push(c),a.c++}function Jb(){this.id=this.url=null,this.type="static",this.b=this.j=this.s=null,this.h=5,this.f=this.c=this.g=null,this.i=1,this.a=[]}function Kb(){this.g=this.f=this.c=this.s=this.a=this.start=this.id=null,this.b=[]}function Lb(){this.i=this.b=this.height=this.width=this.contentType=this.lang=this.group=this.id=null,this.c=!1,this.h=this.g=this.f=this.s=null,this.j=[],this.a=[]}function Mb(){this.value=null}function Nb(){this.contentType=this.lang=this.id=null}function Ob(){this.a=this.b=this.g=this.s=this.h=this.f=this.height=this.width=this.bandwidth=this.lang=this.id=null,this.c=[]}function Pb(){this.b=this.a=this.c=this.f=null}function Qb(){this.parsedPssh=this.psshBox=null}function Rb(){this.url=null}function Sb(){this.url=null}function Tb(){this.s=null,this.g=1,this.c=this.b=this.a=this.f=null}function Ub(){this.a=this.url=null}function Vb(){this.a=this.url=null}function Wb(){this.s=null,this.f=1,this.b=this.g=null,this.i=1,this.h=null,this.a=[],this.c=null}function Xb(){this.a=this.b=null}function Yb(){this.a=1,this.b=this.i=null,this.j=1,this.c=this.g=this.f=this.h=null}function Zb(){this.a=[]}function $b(){this.c=this.a=this.b=null}function _b(a,b){this.na=a,this.end=b}function ac(a){for(var b=[],c=0;c<a.b.length;++c){var d=a.b[c];null!=d.group&&(b[d.group]=!0)}for(c=0;c<a.b.length;++c)if(d=a.b[c],null==d.group){for(var e=1;1==b[e];)++e;b[e]=!0,d.group=e}}function bc(a,b){if(!b||0===b.length)return a;for(var c=[],d=0;d<b.length;d++){var e=b[d].url;null==a||0===a.length?c.push(new Ab(e)):(e=cc(a.slice(0,1),e),c.push(e[0]))}return c}function cc(a,b){if(!b)return a;var c=new Ab(b);return a?a.map(function(a){return a.resolve(c)}):[c]}function dc(a,b,c){var d=jc(c);return(b=fc(b,c.constructor.TAG_NAME))&&d.parse(a,b),d}function ec(a,b,c){var d=null;return(b=fc(b,c.TAG_NAME))&&(d=new c,d.parse(a,b)),d}function fc(a,b){for(var c=null,d=0;d<a.childNodes.length;d++)if(a.childNodes[d].tagName==b){if(c)return null;c=a.childNodes[d]}return c}function gc(a,b,c){for(var d=[],e=0;e<b.childNodes.length;e++)if(b.childNodes[e].tagName==c.TAG_NAME){var f=new c;f.parse.call(f,a,b.childNodes[e]),d.push(f)}return d;
}function hc(a){return a=a.firstChild,a.nodeType!=Node.TEXT_NODE?null:a.nodeValue}function ic(a){return a?a.map(function(a){return a.clone()}):null}function jc(a){return a?a.clone():null}function kc(a,b,c,d){return a=c(a.getAttribute(b)),null!=a?a:void 0!==d?d:null}function lc(a){return a?(a=Date.parse(a),isNaN(a)?null:Math.floor(a/1e3)):null}function mc(b){if(!b)return null;var c=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(b);if(!c)return null;b=0;var d=qc(c[1]);return d&&(b+=31536e3*d),(d=qc(c[2]))&&(b+=2592e3*d),(d=qc(c[3]))&&(b+=86400*d),(d=qc(c[4]))&&(b+=3600*d),(d=qc(c[5]))&&(b+=60*d),c=a.parseFloat(c[6]),(c=isNaN(c)?null:c)&&(b+=c),b}function nc(a){var b=/([0-9]+)-([0-9]+)/.exec(a);return b?(a=qc(b[1]),null==a?null:(b=qc(b[2]),null==b?null:new _b(a,b))):null}function oc(b){return b=a.parseInt(b,10),isNaN(b)?null:b}function pc(b){return b=a.parseInt(b,10),b>0?b:null}function qc(b){return b=a.parseInt(b,10),b>=0?b:null}function rc(a){return a}function sc(a,b){this.url=a,this.b=b||new tc,this.g=this.i=this.h=0,this.a=null,this.c=new ra,this.f=null}function tc(){this.body=null,this.a=1,this.h=1e3,this.c=0,this.method="GET",this.f="arraybuffer",this.b={},this.g=this.j=!1,this.i=null}function uc(a){vc(a),a.b.body=null,a.c.destroy(),a.c=null,a.f=null}function vc(a){a.a&&(a.a.onload=null,a.a.onreadystatechange=null,a.a.onerror=null,a.a.ontimeout=null),a.a=null}function wc(a){var b=a.url.split("/");return La(a.b.i,parseInt(b[2],10),parseInt(b[3],10)).then(xa(a,function(a){var b=JSON.parse(JSON.stringify(new XMLHttpRequest));return b.response=a,a=this.c,a.resolve(b),uc(this),a}))["catch"](xa(a,function(a){return uc(this),Promise.reject(a)}))}function xc(a,b,c){return b=Error(b),b.type=c,b.status=a.a.status,b.url=a.url,b.method=a.b.method,b.body=a.b.body,b.ac=a.a,b}function yc(b){vc(b),a.setTimeout(b.rb.bind(b),b.g*(1+.5*(2*Math.random()-1))),b.g*=2}function zc(a,b,c,d){this.b=b,this.f=c||0,this.h=null!=d?d:null,this.c=this.a=null,this.i=a}function Ac(a,b){return a&&0!==a.length?a.map(function(a){return a.resolve(b)}):[b]}function Bc(a,b,c){return a.a?a.a:(b=b||new tc,(a.f||a.h)&&(b.b.Range="bytes="+(a.f+"-"+(null!=a.h?a.h:""))),a.a=Cc(a,0,b,c),a.a)}function Cc(a,b,c,d){var e=a.b[b].toString();return a.i&&(e=a.i(e,c.b)||e),a.c=new sc(e,c),d&&(a.c.f=d),e=a.c.rb().then(xa(a,function(a){return this.c=this.a=null,Promise.resolve(a.response)})),e=e["catch"](xa(a,function(a){return this.a&&b+1<this.b.length?this.a=Cc(this,b+1,c,d):(this.a=this.c=null,Promise.reject(a))}))}function Dc(a,b){this.a=new tc,this.a.f="text",this.a.a=3,this.a.c=1e3*(null!=b?b:0),this.a.g=!0,this.b=a}function Ec(a){var b=a.b;return Bc(b,a.a).then(function(a){var c;return c=b.b,(c=(a=(new DOMParser).parseFromString(a,"text/xml"))?ec({s:c},a,Jb):null)?Promise.resolve(c):(c=Error("MPD parse failure."),c.type="dash",Promise.reject(c))})}function Fc(a,b,c,d){for(var e=b.a,f=[],g=0;d>g;++g){var h=g+c,i=(h-1)*e.b,j=i/e.a,k=(i+e.b)/e.a,h=Gc(a,b,e.j+h-1,i);if(!h)return null;f.push(new Kc(j,k,h))}return f}function Gc(a,b,c,d){if(!b.a)return null;var e=b.a.h;return e?(c=Hc(e,b.id,c,b.bandwidth,d))?(b=Ac(b.s,c),new zc(a,b,0,null)):null:b.s?new zc(a,b.s,0,null):null}function Hc(b,c,d,e,f){var g={RepresentationID:c,Number:d,Bandwidth:e,Time:f};b=b.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)d)?\$/g,function(b,c,d){if("$$"==b)return"$";var e=g[c];return null==e?b:("RepresentationID"==c&&d&&(d=void 0),b=e.toString(),d=a.parseInt(d,10)||1,d=Math.max(0,d-b.length),Array(d+1).join("0")+b)});try{return new Ab(b)}catch(h){if(h instanceof URIError)return null;throw h}}function Ic(a,b,c){var d=0;b*=c,a=a.a,c=[];for(var e=0;e<a.length&&a[e].a;++e){var f=a[e].b,f=null!=f?f:d,g=a[e].c||0;0>g&&(g=a[e].a,g=e+1===a.length?Math.ceil((a[0].b+b-f)/g)-1:Math.ceil((a[e+1].b-f)/g)-1),0<c.length&&f!=d&&(c[c.length-1].end=f);for(var h=0;g>=h;++h)d=f+a[e].a,c.push({start:f,end:d}),f=d}return c}function Jc(a,b){this.a=a,this.b=b||null}function Kc(a,b,c){this.b=a,this.a=b,this.url=c}function Lc(a,b,c){return new Kc(b,c,a.url)}function Mc(a,b){for(var c=a.length-1;c>=0;--c){var d=a[c];if(b>=d.b&&(null==d.a||b<d.a))return c}return-1}function Nc(a,b){return a.map(function(a){return Lc(a,a.b+b,null!=a.a?a.a+b:null)})}function Oc(){}function Pc(a){this.o=a,this.i=0}function Qc(a){if(0==a.o.length)throw new RangeError("SegmentIndex: There is no first SegmentReference.");return a.o[0]}function Rc(a,b){if(a.i!=b.i&&(b=new Pc(Nc(b.o,a.i-b.i))),0==a.length())a.o=b.o.slice(0);else if(0!=b.length()&&null!=a.A().a&&!(null!=b.A().a&&b.A().a<a.A().a)){if(a.A().a<=Qc(b).b)var c=Lc(a.A(),a.A().b,Qc(b).b),c=a.o.slice(0,-1).concat([c]);else{var d;for(d=0;d<a.o.length&&!(a.o[d].a>=Qc(b).b);++d);a.o[d].b<Qc(b).b?(c=Lc(a.o[d],a.o[d].b,Qc(b).b),c=a.o.slice(0,d).concat([c])):(Qc(a).b>Qc(b).b||Qc(b),c=a.o.slice(0,d))}a.o=c.concat(b.o)}}function Sc(a,b,c,d){Pc.call(this,a),this.g=b,this.w=c,this.f=d,this.h=this.g.b||this.g.a.reduce(function(a,b){return null==b.a?NaN:a+b.a},0)||0,this.a=this.l=this.c=null,Tc(this)}function Tc(a){if(Wc(a),0!=a.length()){a.length();var b=null!=a.A().a?a.A().a:a.A().b;if(a.g.c>a.f)a.c=b;else{var c=a.f-(a.g.c+a.w.start);0>c?a.c=b:c<Math.max(a.A().b,a.A().a||0)?(a.A(),a.c=b):a.c=c}a.l=a.A().b,a.a=Qc(a).b}}function Uc(a,b){if(Vc(a,b),null==a.c||null==a.l||null==a.a)return{start:0,end:0};var c=Number.POSITIVE_INFINITY;a.h&&(c=a.h);var d=b-a.f,e=a.c+d;return null!=a.g.f&&(e=e-a.a-a.g.f,e>0&&(a.a+=e)),a.a=Math.min(a.a,c),d=a.l+d,d<a.a?{start:a.a,end:a.a}:(d=0<a.length()?null!=a.A().a?Math.min(d,a.A().a):d:a.a,d=Math.max(d,a.a),d=Math.min(d,c),{start:a.a,end:d})}function Vc(a,b){if(Wc(a),null!=a.g.f)if(null==a.c)a.length();else{for(var c=a.c+(b-a.f),d=0,e=0;e<a.o.length;++e){var f=null;if(e<a.o.length-1?f=a.o[e+1].a:(f=a.o[e],f=null!=f.a?f.a+(f.a-f.b):null),!(null!=f&&f<c-a.g.f))break;++d}d>0&&a.o.splice(0,d)}}function Wc(a){if(a.h){for(var b=0,c=a.o.length-1;c>=0&&a.o[c].b>a.h;--c)++b;b>0&&a.o.splice(-b)}}function Xc(a,b,c,d,e){var f,g=1,h=0;if(a.c>d)f=null;else{var i=a.i||0,j=a.f||0;f=c.a,f=f.b/f.a;var k=d-(a.c+b.start);0>k?f=null:(j=k-2*f-j,0>j&&(j=0),j=Math.ceil(j/f)*f,k-=f,0>k?f=null:(i=Math.floor(k/f)*f-i,0>i&&(i=0),i=Math.floor(i/f)*f,f={Za:j/f+1,current:(i>=j?i:j)/f+1}))}if(f&&(g=f.Za,h=f.current-f.Za+1),g=Fc(e,c,g,h),null==g)throw a=Error("Failed to generate SegmentReferences."),a.type="stream",a;Sc.call(this,g,a,b,d),this.u=c,this.v=this.b=0<this.length()?a.c+b.start+this.A().a:null,this.j=f?f.current+1:null,this.B=e}function Yc(a,b){if(null!=a.b&&null!=a.v&&null!=a.j){var c=a.u.a,c=c.b/c.a,d=Math.floor((a.v+(b-a.f)-a.b)/c);if(0!=d){var e=Fc(a.B,a.u,a.j,d);Array.prototype.push.apply(a.o,Nc(e,a.i)),a.b+=d*c,a.j+=d}}}function Zc(a,b,c,d,e){this.f=a,this.b=b,this.c=c,this.h=d,this.a=null,this.g=e}function $c(a,b,c,d,e){this.c=a,this.b=b,this.g=c,this.a=null,this.h=d,this.f=e}function _c(a,b,c,d,e){this.b=a,this.c=b,this.f=c,this.h=d,this.a=null,this.g=e}function ad(a){this.b=a,this.a=null}function bd(){this.C=rf++,this.id=this.D=this.H=null,this.c=0,this.height=this.width=this.bandwidth=null,this.b=this.a="",this.f=[],this.N=!1,this.J=!0}function cd(a){var b=a.a||"";return a.b&&(b+='; codecs="'+a.b+'"'),b}function dd(){this.C=sf++,this.id=null,this.contentType=this.lang="",this.b=!1,this.m=[],this.a=[]}function ed(a){for(var b=[],c=0;c<a.a.length;++c){var d=new hd;d.id=a.C,d.a=a.a[c],d.contentType=a.contentType,d.b=a.m.length?cd(a.m[0]):"",b.push(d)}return b}function fd(){this.id=null,this.start=0,this.b=null,this.a=[]}function gd(){this.b=!1,this.h=this.g=this.f=null,this.c=0,this.a=[]}function hd(){this.id=0,this.a=null,this.b=this.contentType=""}function id(a,b,c,d,e){oa.call(this,a),this.c=b,this.a=new Ma(c,d,e),this.w=this.I=this.b=null,this.K=!1,this.g=null,this.l=!1,this.i=null,this.u=!1,this.h=new ra,this.j=this.f=!1,this.B=0,this.L=15,this.F=!1}function jd(a,b,c){a.b&&!a.l&&(a.l=!0,pd(a),Ra(a.a).then(xa(a,function(){var a=this.c.currentTime;return!b&&0<Na(this.a,a)&&0<=Mc(this.a.b,a)?Promise.resolve():c?Qa(this.a,this.c.currentTime+c):(this.F=!0,Pa(this.a))})).then(xa(a,function(){this.l=!1,od(this,0)}))["catch"](xa(a,function(a){this.l=!1,this.f?(a=Z(a),this.dispatchEvent(a)):this.h.reject(a)})))}function kd(a,b,c){a=a.a;var d=a.b.length;return a=d>0?a.b[d-1]:null,null!=a?null!=a.a?c.la(a.a):null:c.la(b)||(c.length()?c.A():null)}function ld(a){if(!a.u&&null!=a.i){a.u=!0;var b=a.a,c=a.i,d=c-b.w;0!=d&&(b.b=Nc(b.b,d),b.w=c),a.h.resolve(a.i)}}function md(a,b){var c;c=b.a.split("/")[0],c=Y({type:"adaptation",bubbles:!0,contentType:c,size:"video"!=c?null:{width:b.width,height:b.height},bandwidth:b.bandwidth}),a.dispatchEvent(c)}function nd(a){var b=Y({type:"ended"});a.dispatchEvent(b)}function od(b,c){b.g=a.setTimeout(b.Nb.bind(b),c)}function pd(b){null!=b.g&&(a.clearTimeout(b.g),b.g=null)}function qd(a){this.b=a,this.a=null}function rd(a,b){oa.call(this,a),this.b=b,this.g=!0,this.h=this.f=null,this.c=new ra,this.a=null}function sd(){}function td(a,b,c,d,e,f,g){this.g=a,this.i=b,this.f=c,this.a=d,this.c=e,this.j=f,this.b=null,this.h=g}function ud(a){this.a=a}function vd(a,b,c){for(var d=J()/1e3,e=0;e<b.a.length;++e)for(var f=b.a[e],g=0;g<f.b.length;++g){var h=f.b[g];if("text"!=h.contentType)for(var i=0;i<h.a.length;++i){var j=h.a[i],k=0,k=k+(j.g?1:0),k=k+(j.b?1:0),k=k+(j.a?1:0);0==k?(h.a.splice(i,1),--i):1!=k&&(j.g?(j.b=null,j.a=null):j.b&&(j.a=null))}}for(wd(b),e=0;e<b.a.length;++e)for(f=b.a[e],g=0;g<f.b.length;++g){for(i=h=f.b[g],j=null,k=0;k<i.a.length;++k){var l=i.a[k].f||"";j?l!=j&&(i.a.splice(k,1),--k):j=l}0==h.a.length&&(f.b.splice(g,1),--g)}for("dynamic"==b.type&&null==b.c&&(b.c=d),e=new gd,"dynamic"==b.type&&(e.b=!0,e.f=b.g,e.g=new zc(c,b.j||b.url),e.h=b.c),e.c=b.h||5,f=0;f<b.a.length&&(g=b.a[f],null!=g.start);++f)g=xd(a,b,g,d,c),e.a.push(g);return e}function wd(a){if(a.a.length){null==a.a[0].start&&(a.a[0].start=0);var b=function(a){return 0==a||!!a};"dynamic"==a.type&&(a.b=null),b(a.b)&&1==a.a.length&&!b(a.a[0].a)&&(a.a[0].a=a.b);for(var c=0,d=!0,e=0;e<a.a.length;++e){var f=a.a[e-1],g=a.a[e],h=a.a[e+1]||{start:a.b};!b(g.start)&&f&&b(f.start)&&b(f.a)&&(g.start=f.start+f.a),!b(g.a)&&b(h.start)&&(g.a=h.start-g.start),null!=g.start&&null!=g.a?c+=g.a:d=!1}b(a.b)||(e=a.a[a.a.length-1],d?a.b=c:b(e.start)&&b(e.a)?a.b=e.start+e.a:"dynamic"!=a.type&&(a.b=c))}}function xd(a,b,c,d,e){var f=new fd;f.id=c.id,f.start=c.start,f.b=c.a;var g=new ga;c.b.forEach(function(a){g.push(a.contentType||"",a)});for(var h=ja(g),i=0;i<h.length;++i){var j=new ga;g.get(h[i]).forEach(function(a){j.push(a.group,a)});for(var k=ja(j),l=0;l<k.length;++l){var m=new ga;j.get(k[l]).forEach(function(a){m.push(a.lang,a)});for(var n=ja(m),o=0;o<n.length;++o){var p=m.get(n[o]),p=yd(a,b,c,p,d,e);f.a.push(p)}}}return f}function yd(a,b,c,e,f,g){d(e.every(function(a){return a.group==e[0].group&&(a.lang||"")==(e[0].lang||"")&&(a.contentType||"")==(e[0].contentType||"")}));var h=new dd,i=e.filter(function(a){return null!=a.id});i.length==e.length&&(h.id=i.map(function(a){return a.id}).sort().reduce(function(a,b){return a+","+b})),h.lang=e[0].lang||"",h.contentType=e[0].contentType||"",h.b=e.some(function(a){return a.c});for(var i={},j=0;j<e.length;++j)for(var k=e[j],l=0;l<k.a.length;++l){var m=k.a[l],n=Bd(a,m),o=h.a.slice(0);Ad(n,o),0==o.length&&0<h.a.length||!(m=Dd(b,c,m,f,g))||(h.m.push(m),h.a=o,i[m.C]=k)}if(h.a.some(function(a){return""==a.a}))return h.m.forEach(function(a){a.N=!0}),h;for(a=zd(e),j=0;j<h.m.length;++j)m=h.m[j],k=i[m.C],k==a&&(m.N=!0);return h}function zd(a){for(var b=null,c=null,d=0;d<a.length;++d)for(var e=a[d],f=0;f<e.a.length;++f){var g=e.a[f],g=(g.width||1)*(g.height||1)*(g.bandwidth||1);(null==b||b>g)&&(b=g,c=e)}return c}function Ad(a,b){if(0==b.length)Array.prototype.push.apply(b,a);else for(var c=0;c<b.length;++c){for(var d=!1,e=0;e<a.length;++e){var f=b[c],g=a[e];if(f.a==g.a&&f.h==g.h&&f.i==g.i&&f.g==g.g&&f.v==g.v&&f.f==g.f&&f.j==g.j&&Za(f.c,g.c)){d=!0,ab(b[c],a[e].b);break}}d||(b.splice(c,1),--c)}}function Bd(a,b){var c=[];if(0==b.c.length)c.push(new $a);else if(a.a)for(var d=0;d<b.c.length;++d)c.push.apply(c,Cd(a,b.c[d]));return c}function Cd(a,b){var c=[];if(2!=a.a.length)return[];var d=a.a(b.c||"",b.f);if(!(d&&d instanceof Array))return[];for(var e=0;e<d.length;++e){var f=_a(d[e]);0==f.b.length&&b.a&&b.a.psshBox&&ab(f,[{initData:b.a.psshBox,initDataType:"cenc"}]),c.push(f)}return c}function Dd(a,b,c,d,e){if(!c.s||0===c.s.length)return null;var f=null,g=1,h=0;if(c.g)f=c.f.split("/")[1],"mp4"!=f&&"webm"!=f?f=null:(g=c.g,("webm"!=f||g.c)&&(g.a||g.b&&g.b.a)?(h=g.b,h||(h=new Ub,h.url=c.s,h.a=g.a?g.a.clone():null),h=Fd(h,e),g=g.c?Fd(g.c,e):null,a=new td(a,b,f,h,g,d,e),b=new Jc(g),d=new bd,d.H=a,d.D=b,f=d):f=null),g=c.g.g,h=c.g.f;else if(c.b)f=c.b,!f.b&&!f.c&&1<f.a.length?f=null:f.b||b.a||f.c||1!=f.a.length?f.c&&0===f.c.a.length?f=null:(f=f.h?Fd(f.h,e):null,a=new $c(a,b,c,d,e),b=new Jc(f),d=new bd,d.H=a,d.D=b,f=d):f=null,g=c.b.f,h=c.b.g;else if(c.a){a:if(f=c.a,g=0+(f.f?1:0),g+=f.c?1:0,g+=f.b?1:0,0==g?g=!1:(1!=g&&(f.f?(f.c=null,f.b=null):f.c&&(f.b=null)),g=!0),g){if(g=null,f.g&&(g=(f=c.a.g)?Ed(c,f,Vb):null,!g)){f=null;break a}f=g?Fd(g,e):null,g=c.a,g.f?(g=c.f.split("/")[1],"mp4"!=g&&"webm"!=g?a=null:("webm"!=g||f)&&Gc(e,c,1,0)&&(h=(h=c.a.f)?Ed(c,h,Ub):null)?(h=Fd(h,e),a=new td(a,b,g,h,f,d,e)):a=null):a=g.h?g.c?new _c(a,b,c,d,e):g.b?"dynamic"!=a.type&&null==b.a?null:new Zc(a,b,c,d,e):null:null,a?(b=new Jc(f),d=new bd,d.H=a,d.D=b,f=d):f=null}else f=null;g=c.a.a,h=c.a.i}else"text"==c.f.split("/")[0]&&(f=new bd,f.H=new qd(new zc(e,c.s)));if(!f)return null;for(f.id=c.id,h&&(f.c=-1*h/g),f.bandwidth=c.bandwidth,f.width=c.width,f.height=c.height,f.a=c.f||"",f.b=c.h||"",a=0;a<c.c.length;++a)b=c.c[a],b.b&&f.f.push(b.b);return f}function Ed(a,b,c){return(b=Hc(b,a.id,null,a.bandwidth,null))?(c=new c,c.url=Ac(a.s,b),c):null}function Fd(a,b){var c=a.url,d=0,e=null;return a.a&&(d=a.a.na,e=a.a.end),new zc(b,c,d,e)}function Gd(){this.streamStats=null,this.droppedFrames=this.decodedFrames=NaN,this.bufferingTime=this.playTime=this.estimatedBandwidth=0,this.playbackLatency=NaN,this.bufferingHistory=[],this.bandwidthHistory=[],this.streamHistory=[]}function Hd(a,b){var c=new Id(b);a.streamHistory.push(new Jd(c)),!c.videoHeight&&a.streamStats||(a.streamStats=c)}function Id(a){this.videoWidth=a.width,this.videoHeight=a.height,this.videoMimeType=a.a,this.videoBandwidth=a.bandwidth}function Jd(a){this.timestamp=J()/1e3,this.value=a}function Kd(a,b){ya.call(this,"readwrite",b),this.j=a,this.b=0}function Ld(a,b,c,d,e){for(var f=[],g=[],h=0,i=0,j=[],k=b.map(function(a){return a.H.create()}),k=Promise.all(k),l=b.map(function(a){return a.D.create()}),l=Promise.all(l),k=Promise.all([k,l]).then(function(a){f=a[0],g=a[1],h=f.reduce(function(a,b){return a+b.length()},0)}),l=0;l<b.length;++l)k=k.then(function(a){return Nd(this,b[a],f[a],g[a],h,i)}.bind(a,l)),k=k.then(function(a,b){i+=f[a].length(),j.push(b)}.bind(a,l));return k.then(xa(a,function(){return Od(Ea(this))})).then(xa(a,function(a){var b=new ra;c=I(c);var f={group_id:a,stream_ids:j,session_ids:c,duration:d,key_system:e.a,license_server:e.h,with_credentials:e.i,distinctive_identifier:e.g,audio_robustness:e.f,video_robustness:e.j},g=Ea(this).put(f);return g.onsuccess=function(){b.resolve(a)},g.onerror=function(){b.reject(g.error)},b}))}function Md(a,b){return Ga(Ea(a),b).then(xa(a,function(a){var c,d=[];for(c in a.stream_ids)d.push(Qd(this,a.stream_ids[c]));return a=Ea(this),d.push(a["delete"](b)),Promise.all(d)}))}function Nd(a,b,c,d,e,f){var g=[Od(Da(a)),Od(Ca(a).index("stream"))],g=Promise.all(g).then(xa(a,function(a){return{qa:Math.max(a[0],a[1]),ja:new ArrayBuffer(0),Ja:0,o:[],Ca:null,Zb:e,jb:f}})),g=g.then(a.f.bind(a,c));return g=g.then(a.g.bind(a,b,d))}function Od(a){var b=new ra,c=a.openCursor(null,"prev");return c.onsuccess=function(a){a.target.result?b.resolve(a.target.result.key+1):b.resolve(0)},c.onerror=function(){b.reject(c.error)},b}function Pd(a,b){var c=new Uint8Array(a.byteLength+b.byteLength);return c.set(new Uint8Array(a),0),c.set(new Uint8Array(b),a.byteLength),c.buffer}function Qd(a,b){var c=new ra,d=Da(a)["delete"](b);d.onerror=function(){c.reject(d.error)};var e=Ca(a);return e.index("stream").openKeyCursor(IDBKeyRange.only(b)).onsuccess=function(a){(a=a.target.result)&&(e["delete"](a.primaryKey),a["continue"]())},e.transaction.oncomplete=function(){c.resolve()},c}function Rd(a,b,c,d,e,f){this.b=new zc(null,[new Ab(a)]),this.a=new tc,this.a.body=b,this.a.method=c,this.a.a=3,this.a.j=d,this.a.c=1e3*(null!=f?f:0),a=e||{};for(var g in a)this.a.b[g]=a[g]}function Sd(a){return Bc(a.b,a.a).then(function(a){return Promise.resolve(new Uint8Array(a))})}function Td(a,b,c){oa.call(this,a),this.h=b,this.b=c,this.a=this.i=null,this.l=new ka,this.c=[],this.f=[],this.u=0,this.g=new ra,this.j=null,this.w=0}function Ud(b,c){return null==b.j&&(b.j=a.setTimeout(function(){var a=Error("Timeout waiting for sessions.");a.type="storage",this.g.reject(a)}.bind(b),c)),b.g}function Vd(a){return Promise.all(a.f.map(function(a){return a.remove()}))}function Wd(a,b,c){for(var d in b)c=c["catch"](function(a,b){return navigator.requestMediaKeySystemAccess(a,[b])}.bind(null,d,b[d]));return a.b.ha()&&(c=c["catch"](function(){throw Error("Either none of the requested key systems are supported or none of the requested key systems support persistent state.")})),c}function Xd(){var a=Error("EmeManager destroyed");return a.type="destroy",Promise.reject(a)}function Yd(a){for(var b=a.b.ua(),c=0;c<b.length;++c){var d=Zd(a),e=d.load(b[c]);a.f.push(d),e.then(xa(a,function(){this.u++,this.u>=this.f.length&&this.g.resolve()}))["catch"](xa(a,function(a){a=Z(a),this.dispatchEvent(a)}))}}function Zd(a){var b=null;if(a.b.ha())try{b=a.i.createSession("persistent-license")}catch(c){throw Error("Persistent licenses are not supported by this key system or platform.")}else b=a.i.createSession();return la(a.l,b,"message",a.Jb.bind(a)),la(a.l,b,"keystatuseschange",a.yb.bind(a)),b}function $d(a,b,c,d){d=_d(c,d),Sd(new Rd(d.url,d.body,d.method,c.i,d.headers,a.w)).then(xa(a,function(a){return c.l&&(a=c.l(a)),b.update(a)})).then(xa(a,function(){var a=Y({type:"sessionReady",detail:b});this.dispatchEvent(a),this.u++,this.u>=this.f.length&&this.g.resolve()}))["catch"](xa(a,function(a){a.La=b,a=Z(a),this.dispatchEvent(a)}))}function _d(b,c){var d={url:b.h,body:c.slice(0),method:"POST",headers:{}};if("com.microsoft.playready"===b.a){for(var e=String.fromCharCode.apply(null,new Uint16Array(d.body)),e=(new DOMParser).parseFromString(e,"application/xml"),f=e.getElementsByTagName("name"),g=e.getElementsByTagName("value"),h=0;h<f.length;h++)d.headers[f[h].childNodes[0].nodeValue]=g[h].childNodes[0].nodeValue;d.body=a.atob(e.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue)}if(!b.u)return d;if(b.u(d),d.url=da(d,"url"),null==d.url)throw Error("'url' cannot be null.");if(!(d.body instanceof ArrayBuffer||"string"==typeof d.body||null==d.body))throw new TypeError("'body' must be an ArrayBuffer, a string, or null.");if(d.method=da(d,"method"),"GET"!=d.method&&"POST"!=d.method)throw Error("'method' must be either 'GET' or 'POST'.");if(d.headers=fa(d,"headers",Object),null==d.headers)throw Error("'headers' cannot be null.");return d}function ae(a){oa.call(this,null),this.a=a,this.b=null,this.f=new ka,this.i=this.j=null,this.F=0,this.w=null,this.h=!1,this.g=new Gd,this.c={enableAdaptation:!0,streamBufferSize:15,liveStreamEndTimeout:15,licenseRequestTimeout:0,mpdRequestTimeout:0,segmentRequestTimeout:0,preferredLanguage:"en",restrictions:new j},this.l=1,this.G=null}function be(b){return"text/vtt"==b?!!a.VTTCue:MediaSource.isTypeSupported(b)}function ce(){var a=Error("Player destroyed");return a.type="destroy",Promise.reject(a)}function de(b){b.i&&(a.clearTimeout(b.i),b.i=null)}function ee(b){fe(b),b.w=a.setTimeout(b.L.bind(b),100)}function fe(b){b.w&&(a.clearTimeout(b.w),b.w=null)}function ge(a){g("buffering");var b=a.g;b.bufferingTime+=h("buffering")/1e3,a.h=!1,a.dispatchEvent(Y({type:"bufferingEnd"}))}function he(a){for(var b=0;b<a.length;++b)for(var c=a[b],d=0;d<c.a.length;++d){for(var e=c.a[d],f=e,g=0;g<f.m.length;++g)be(cd(f.m[g]))||(f.m.splice(g,1),--g);0==e.m.length&&(c.a.splice(d,1),--d)}}function ie(a){for(var b=0;b<a.length;++b)for(var c=a[b],d=0;d<c.a.length;++d)c.a[d].m.sort(je)}function je(a,b){var c=a.bandwidth||Number.MAX_VALUE,d=b.bandwidth||Number.MAX_VALUE;return d>c?-1:c>d?1:0}function ke(a){this.a=a}function le(a){function b(a,b){return a.concat(b)}var c=a.a.map(function(a){return a.a}).reduce(b,[]).map(function(a){return a.m}).reduce(b,[]);return a=c.map(function(a){return a.H.create()}),Promise.all(a).then(function(a){for(var b={},d=0;d<c.length;++d)b[c[d].C]=a[d];return Promise.resolve(b)})}function me(a,b,c,d,e){var f=new ga;a.a.forEach(function(a,b){f.push(a.id||""+b,a)});var g=new ga;for(b.a.forEach(function(a,b){g.push(a.id||""+b,a)}),a=ja(f),b=0;b<a.length;++b){var h=a[b],i=f.get(h);1<i.length||(h=g.get(h))&&0!=h.length&&1==h.length&&(ne(i[0],h[0],c,d,e),i[0].b=h[0].b)}}function ne(a,b,c,d,e){var f=new ga;a.a.forEach(function(a,b){f.push(a.id||""+b,a)});var g=new ga;for(b.a.forEach(function(a,b){g.push(a.id||""+b,a)}),a=ja(f),b=0;b<a.length;++b){var h=a[b],i=f.get(h);1<i.length||(h=g.get(h))&&0!=h.length&&1==h.length&&oe(i[0],h[0],c,d,e)}}function oe(a,b,c,d,e){var f=new ga;a.m.forEach(function(a,b){f.push(a.id||""+b,a)});var g=new ga;b.m.forEach(function(a,b){g.push(a.id||""+b,a)}),b={};for(var h=ja(f),i=0;i<h.length;++i){var j=h[i];b[j]=j;var k=f.get(j);1<k.length||((j=g.get(j))&&0!=j.length?1==j.length&&(pe(k[0],j[0],c,d),k[0].D=j[0].D,j[0].D=null,k[0].c=j[0].c):(e.push(k[0]),a.m.splice(a.m.indexOf(k[0]),1)))}for(h=ja(g),i=0;i<h.length;++i)j=h[i],b[j]||(b[j]=j,j=g.get(j),a.m.push(j[0]))}function pe(a,b,c,d){a=c[a.C],b=d[b.C],a.length(),a.Ha(b)&&a.length()}function qe(){this.a=this.b=null,this.f=new ka,this.c=Number.POSITIVE_INFINITY,this.i=!0,this.g=!1}function re(a){var b=a.a.ma();if(0==b.length)return null;b.sort(p);var c;a:{c=a.a.pa();for(var d=0;d<c.length;++d)if(c[d].active){c=c[d];break a}c=null}c=c?c.bandwidth:0,a=a.b.getBandwidth();for(var d=b[0],e=0;e<b.length;++e){var f=b[e],g=e+1<b.length?b[e+1]:{bandwidth:Number.POSITIVE_INFINITY};if(f.bandwidth&&(g=(g.bandwidth+c)/.85,a>=(f.bandwidth+c)/.95&&g>=a&&(d=f,d.active)))break}return d}function se(a,b,c){oa.call(this,null),this.f=a,this.c=b,this.b=_a(c),this.a=null}function te(a,b,c){oa.call(this,null),this.a=a,this.Z=b,this.i=new ka,this.g=new MediaSource,this.f=null,this.da=0,this.b=new ga,this.I=c,this.I.initialize(b,this),this.L=!1,this.K="en",this.fa=!1,this.U=null,this.B=new ra,this.h=new j,this.F=null,this.Va=1,this.c={},this.ea=new ra,this.Ta=0,this.Ua=15,this.w=null,this.Ra=this.Sa=!1,this.u={},this.$=this.Y=this.V=null,this.G={}}function ue(b,c){if(null!=b.a.f){var d=Math.max(b.a.f,3),d=Math.max(d-c,0);b.V=a.setTimeout(b.ib.bind(b,!1),1e3*d)}}function ve(a,b){var c=b.a.split("/")[0],d=a.c[c];if(d&&d.oa()==b){var e=a.b.get(b.a.split("/")[0]).map(function(a){return a.m}).reduce(function(a,b){return a.concat(b)},[]).filter(function(a){return a.N&&a.J});if(0==e.length)return c=Error("All usable streams have been removed from the manifest."),c.type="app",c=Z(c),void a.dispatchEvent(c);a.u[c].Pa==b&&delete a.u[c],d.ra(e[0],!0),b.destroy()}b.destroy()}function we(a){if(a.h){for(var b=!1,c=0;c<a.a.a.length;++c)for(var d=a.a.a[c],e=0;e<d.a.length;++e){var f=d.a[e];if("video"==f.contentType)for(var g=0;g<f.m.length;++g){var h=f.m[g],i=h.J;h.J=!0,a.h.maxWidth&&h.width>a.h.maxWidth&&(h.J=!1),a.h.maxHeight&&h.height>a.h.maxHeight&&(h.J=!1),a.h.minHeight&&h.height<a.h.minHeight&&(h.J=!1),a.h.maxBandwidth&&h.bandwidth>a.h.maxBandwidth&&(h.J=!1),a.h.minBandwidth&&h.bandwidth<a.h.minBandwidth&&(h.J=!1),i!=h.J&&(b=!0)}}0!=ha(a.b).length&&b&&(xe(a),0<a.ma().length||(b=Error("The application has restricted all video tracks!"),b.type="app",b=Z(b),a.dispatchEvent(b)))}}function xe(a){var b=Y({type:"trackschanged",bubbles:!0});a.dispatchEvent(b)}function ye(a,b,c,d,e){if(!a.b.a.hasOwnProperty(b)||!a.c[b])return!1;for(var f=a.b.get(b),g=0;g<f.length;++g)for(var h=f[g],i=0;i<h.m.length;++i){var j=h.m[i];if(j.C==c)return j.N&&j.J?"text"==b||a.Ra?(Hd(a.U,j),a.c[b].ra(j,d,e),!0):(c=a.u[b],a.u[b]={Pa:j,Xa:null!=c&&c.Xa||d,Ya:null!=c&&c.Ya||e},!0):!1}return!1}function ze(a,b){for(var c=0;2>=c;++c)for(var d=0;d<b.length;++d){var e=b[d];if($(c,a.K,e.lang))return b.splice(d,1),void b.splice(0,0,e)}for(d=0;d<b.length;++d)if(e=b[d],e.b){b.splice(d,1),b.splice(0,0,e);break}}function Ae(b){for(var c=[],d=["audio","video","text"],e=0;e<d.length;++e){var f=d[e];b.b.a.hasOwnProperty(f)&&c.push(b.b.get(f)[0])}for(var g=Be(b,c),e=0;e<d.length;++e)if(f=d[e],b.b.a.hasOwnProperty(f)&&!g[f])return b=Error("Unable to select an initial "+f+" stream: all "+f+" streams have been restricted (by the application or by the key system)."),b.type="stream",Promise.reject(b);return c=aa(g).map(function(a){return a.H.create()}),Promise.all(c).then(xa(b,function(a){return a.every(function(a){return a.length()})&&(a=Ke(this,a))?Ce(this,g)?(this.I.start(),Ee(this,g,a),Promise.resolve()):(a=Error("Failed to create Stream objects."),a.type="stream",Promise.reject(a)):(a=Error("Some streams are not available."),a.type="stream",Promise.reject(a))}))["catch"](xa(b,function(b){return"aborted"!=b.type?(Object.keys(this.c),this.a.b?(J()<this.a.h?(b=Math.max(this.a.h-Date.now()/1e3,3),this.V=a.setTimeout(this.ib.bind(this,!0),1e3*b)):ue(this,0),Promise.resolve()):Promise.reject(b)):void 0}))}function Be(a,b){for(var c={},d=0;d<b.length;++d){var e=b[d],f=null;if("video"==e.contentType){var g=a.I.getInitialVideoTrackId();if(null==g)continue;if(f=e.m.filter(function(a){return a.C==g}),0==f.length)continue;f=f[0]}else if("audio"==e.contentType){if(f=e.m.filter(function(a){return a.N&&a.J}),0==f.length)continue;f=e.m[Math.floor(f.length/2)]}else 0<e.m.length&&(f=e.m[0]);c[e.contentType]=f}return c}function Ce(a,b){var c,d={};for(c in b){var e=b[c],e="text"==c?new rd(a,a.f):De(a,e);if(!e)return aa(d).forEach(function(a){a.destroy()}),!1;d[c]=e}return a.c=d,!0}function De(a,b){var c=new id(a,a.f,a.g,cd(b),a.Z);return c.G(a.G),c}function Ee(a,b,c){a.Va=a.f.playbackRate,a.f.playbackRate=0,Ge(a,c);var d;a.$&&a.$<=c.end&&a.$>=c.start?d=a.$:a.a.b?(d=c.end,a.Sa=!0):d=c.start,la(a.i,a.f,"seeking",a.Ib.bind(a)),a.f.currentTime!=d&&(a.f.currentTime=d,a.F=d),He(a,c.start,c.end),c=[];for(var e in a.c){d=a.c[e],c.push(d.sb(a.ea)),la(a.i,d,"ended",a.Kb.bind(a));var f=b[e];Hd(a.U,f),d.ra(f,!1)}Promise.all(c).then(a.ub.bind(a))["catch"](xa(a,function(a){"destroy"!=a.type&&(a=Z(a),this.dispatchEvent(a))})),a.Na(a.fa)}function Fe(a,b,c){(b=Ke(a,b))&&(Ge(a,b),He(a,b.start,b.end)),0!=c&&(c=a.f.currentTime+c,a.f.currentTime=c,a.F=c),a.Sa&&b&&(a.f.currentTime=b.end),a.f.playbackRate=a.Va,a.a.b&&null!=a.a.f&&ue(a,0),Le(a),a.ea.resolve()}function Ge(a,b){if(a.a.b)isNaN(a.g.duration)&&(a.g.duration=b.end+2592e3);else if(isNaN(a.g.duration)||b.end>a.g.duration){a.g.duration=b.end;for(var c=0;c<a.g.sourceBuffers.length;++c)a.g.sourceBuffers[c].appendWindowEnd=b.end}}function He(a,b,c){b=Y({type:"seekrangechanged",bubbles:!0,start:b,end:c}),a.dispatchEvent(b)}function Ie(a,b,c,d){if(b>=c-.01)return!1;if(b=0,a.a.b){b=.5;for(var e in a.c)if(!a.c[e].lb(c+b)){b=a.a.c;break}}return a.f.currentTime=Math.min(c+b,d),!0}function Je(a){return aa(a.c).map(function(a){return a.cb()}).filter(function(a){return null!=a})}function Ke(a,b){for(var c=0,d=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,f=0;f<b.length;++f){var g=b[f].Ea(),c=Math.max(c,g.start);null!=g.end&&(d=Math.min(d,g.end)),b[f].length()&&(e=Math.min(e,b[f].A().a))}if(d==Number.POSITIVE_INFINITY){if(d=a.a.a[0],!d.b)return null;d=(d.start||0)+d.b}return a.a.b&&(d=Math.max(d-a.a.c,c)),c>d?null:{start:c,end:d,A:e}}function Le(b){b.a.b&&(b.Y=a.setTimeout(b.Mb.bind(b),1e3))}function Me(a){for(var b in a.c)a.c[b].G(a.G)}function Ne(a,b,c,d){c||(c=new qa),d||(d=new qe),te.call(this,null,c,d),this.za=a,this.l=null,this.M=b,this.R=[],this.ga=[],this.ta=[],this.j=null}function Oe(a,b,c){b||(b=new qa),c||(c=new qe),te.call(this,null,b,c),this.R=a,this.M=[],this.timeoutMs=3e4,this.l={},this.j=this.ga=null}function Pe(a,b,c,d){var e=new Kd(a.Z,a);return null!=a.l.segmentRequestTimeout&&(e.b=Number(a.l.segmentRequestTimeout)),za(e).then(xa(a,function(){return Ld(e,b,this.M,d,c)})).then(function(a){return Aa(e),Promise.resolve(a)})["catch"](function(a){return Aa(e),Promise.reject(a)})}function Qe(a){var b=new Kd(null,null);return za(b).then(xa(a,function(){return Md(b,this.R)})).then(function(){return Aa(b),Promise.resolve()})["catch"](function(a){return Aa(b),Promise.reject(a)})}function Re(b){var c=document.createElement("video");c.src=a.URL.createObjectURL(b.g);var d=new Td(null,c,b);return null!=b.l.licenseRequestTimeout&&(d.w=Number(b.l.licenseRequestTimeout)),b.X().then(function(){return d.initialize()}).then(xa(b,function(){return Ud(d,this.timeoutMs)})).then(function(){return Vd(d)}).then(xa(b,function(){return d.destroy(),this.destroy(),Promise.resolve()}))["catch"](xa(b,function(a){return d.destroy(),this.destroy(),Promise.reject(a)}))}var Se,Te=this;e("error"),e("warn"),e("info"),e("log"),e("debug");var Ue=a.performance&&a.performance.now?a.performance.now.bind(a.performance):Date.now,Ve={};b("shaka.player.AudioTrack.compare",function(a,b){return a.lang<b.lang?-1:a.lang>b.lang?1:a.bandwidth<b.bandwidth?-1:a.bandwidth>b.bandwidth?1:0}),j.prototype.clone=function(){var a=new j;return a.maxHeight=this.maxHeight,a.minHeight=this.minHeight,a.maxWidth=this.maxWidth,a.maxBandwidth=this.maxBandwidth,a.minBandwidth=this.minBandwidth,a},b("shaka.player.TextStyle",k),k.prototype.a=function(){var b=a.localStorage.getItem("ShakaPlayerTextStyle");if(b){var c;try{c=JSON.parse(b)}catch(d){return}if(c&&"object"==typeof c){var e,b=c;for(e in b)e in this&&(this[e]=b[e])}}},k.prototype.load=k.prototype.a,k.prototype.b=function(){a.localStorage.setItem("ShakaPlayerTextStyle",JSON.stringify(this))},k.prototype.store=k.prototype.b;var We=[255,255,255],Xe=[0,0,0];k.StandardColors={WHITE:We,BLACK:Xe,RED:[255,0,0],GREEN:[0,255,0],BLUE:[0,0,255],YELLOW:[255,255,0],MAGENTA:[255,0,255],CYAN:[0,255,255]};var Ye=1;k.StandardOpacities={OPAQUE:Ye,SEMI_HIGH:.75,SEMI_LOW:.25,TRANSPARENT:0};var Ze=[];k.EdgeStyles={NONE:Ze,RAISED:[[34,34,34,1,1,0],[34,34,34,2,2,0],[34,34,34,3,3,0]],DEPRESSED:[[204,204,204,1,1,0],[204,204,204,0,1,0],[34,34,34,-1,-1,0],[34,34,34,0,-1,0]],UNIFORM:[[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4],[34,34,34,0,0,4]],DROP:[[34,34,34,2,2,3],[34,34,34,2,2,4],[34,34,34,2,2,5]]},b("shaka.player.TextTrack.compare",function(a,b){return a.lang<b.lang?-1:a.lang>b.lang?1:0}),b("shaka.player.VideoTrack.compare",p),b("shaka.polyfill.CustomEvent.install",q),b("shaka.polyfill.Fullscreen.install",s),w.prototype.createSession=function(){},w.prototype.setServerCertificate=function(){},x.prototype.getConfiguration=function(){},x.prototype.createMediaKeys=function(){};var $e=0;b("shaka.polyfill.Promise.install",z),y.prototype.then=function(a,b){var c=new y;switch(this.ba){case 1:E(this,c,a);break;case 2:E(this,c,b);break;case $e:this.c.push({Ia:c,Ba:a}),this.b.push({Ia:c,Ba:b})}return c},y.prototype.then=y.prototype.then,y.prototype["catch"]=function(a){return this.then(void 0,a)},y.prototype["catch"]=y.prototype["catch"],y.prototype.W=function(a){if(this.ba==$e){for(this.wa=a,this.ba=1,a=0;a<this.c.length;++a)E(this,this.c[a].Ia,this.c[a].Ba);this.c=[],this.b=[]}},y.prototype.a=function(a){if(this.ba==$e){for(this.wa=a,this.ba=2,a=0;a<this.b.length;++a)E(this,this.b[a].Ia,this.b[a].Ba);this.c=[],this.b=[]}},b("shaka.polyfill.VideoPlaybackQuality.install",G);var _e,af=0,bf=1,cf={"output-restricted":"The required output protection is not available.","output-not-allowed":"The required output protection is not available.",expired:"The decryption key has expired.","internal-error":"The key system has encountered an unspecified error."
};W.prototype.sample=function(a,b){var c=Math.pow(this.c,a);this.b=b*(1-c)+c*this.b,this.a+=a};var df=1,ef=2,ff={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"};ga.prototype.push=function(a,b){this.a.hasOwnProperty(a)?this.a[a].push(b):this.a[a]=[b]},ga.prototype.set=function(a,b){this.a[a]=b},ga.prototype.get=function(a){return(a=this.a[a])?a.slice():null},ka.prototype.destroy=function(){ma(this),this.a=null},ka.prototype.sa=function(a,b){for(var c=this.a.get(b)||[],d=0;d<c.length;++d){var e=c[d];e.target==a&&(e.sa(),ia(this.a,b,e))}},na.prototype.sa=function(){this.target&&(this.target.removeEventListener(this.type,this.a,!1),this.a=this.target=null)},b("shaka.util.FakeEventTarget",oa),oa.prototype.addEventListener=function(a,b,c){c||this.ya.push(a,b)},oa.prototype.removeEventListener=function(a,b,c){c||ia(this.ya,a,b)},oa.prototype.dispatchEvent=function(a){if(a.hasOwnProperty("srcElement")||(delete a.srcElement,Object.defineProperty(a,"srcElement",{get:function(){return null}})),a.hasOwnProperty("target"))a.target=this;else{delete a.target;var b=this;Object.defineProperty(a,"target",{get:function(){return b},set:function(a){b=a}})}if(a.hasOwnProperty("currentTarget"))a.currentTarget=null;else{delete a.currentTarget;var c=null;Object.defineProperty(a,"currentTarget",{get:function(){return c},set:function(a){c=a}})}return pa(this,a)},c(qa,oa),b("shaka.util.EWMABandwidthEstimator",qa),qa.prototype.sample=function(a,b){if(!(65536>b)){a=Math.max(a,50);var c=8e3*b/a,d=a/1e3;this.a.sample(d,c),this.c.sample(d,c),this.dispatchEvent(Y({type:"bandwidth"})),this.b=Date.now()}},qa.prototype.getBandwidth=function(){return.5>this.a.a?5e5:Math.min(X(this.a),X(this.c))},qa.prototype.getDataAge=function(){return(Date.now()-this.b)/1e3},qa.prototype.supportsCaching=function(){return!1},ra.prototype.destroy=function(){this["catch"](function(){});var a=Error("Destroyed!");a.type="destroy",this.reject(a)},ta.prototype.start=function(){if(this.f)throw Error("Task already started!");this.f=!0,this.b.unshift(function(){}),va(this,void 0)},ta.prototype.end=function(){this.b.splice(1)},c(ya,oa),c(Ha,ya);var gf=1/60;Ma.prototype.destroy=function(){Ra(this)["catch"](function(){}),this.f&&this.f.destroy(),this.a=this.f=null,this.g&&(Aa(this.g),this.g=null),this.b=null,this.i.destroy(),this.v=this.c=this.i=null},Ma.prototype.h=function(){"open"==this.v.readyState&&this.c.abort()},Ma.prototype.B=function(){this.f.resolve(),this.f=null},b("shaka.util.Uint8ArrayUtils.toString",Va),b("shaka.util.Uint8ArrayUtils.fromString",Wa),b("shaka.util.Uint8ArrayUtils.toBase64",function(b,c){var d=void 0==c?!0:c,e=a.btoa(Va(b)).replace(/\+/g,"-").replace(/\//g,"_");return d?e:e.replace(/=*$/,"")}),b("shaka.util.Uint8ArrayUtils.fromBase64",Xa),b("shaka.util.Uint8ArrayUtils.fromHex",function(b){for(var c=new Uint8Array(b.length/2),d=0;d<b.length;d+=2)c[d/2]=a.parseInt(b.substr(d,2),16);return c}),b("shaka.util.Uint8ArrayUtils.toHex",Ya),eb.prototype.createMediaKeys=function(){var a=new fb(this.a);return Promise.resolve(a)},eb.prototype.getConfiguration=function(){return this.b},Se=fb.prototype,Se.createSession=function(a){var b=a||"temporary";if("temporary"!=b&&"persistent-license"!=b)throw new TypeError("Session type "+a+" is unsupported on this platform.");return a=this.b||document.createElement("video"),a.src||(a.src="about:blank"),b=new ib(a,this.g,b),this.c.push(b),b},Se.setServerCertificate=function(){return Promise.reject(Error("setServerCertificate not supported on this platform."))},Se.Rb=function(a){a=Y({type:"encrypted",initDataType:"webm",initData:a.initData}),this.b.dispatchEvent(a)},Se.Qb=function(a){var b=hb(this,a.sessionId);b&&(a=Y({type:"message",messageType:void 0==b.keyStatuses.Fa()?"licenserequest":"licenserenewal",message:a.message}),b.b&&(b.b.resolve(),b.b=null),b.dispatchEvent(a))},Se.Ob=function(a){(a=hb(this,a.sessionId))&&(kb(a,"usable"),a.a&&a.a.resolve(),a.a=null)},Se.Pb=function(a){var b=hb(this,a.sessionId);if(b){var c=Error("EME v0.1b key error");c.errorCode=a.errorCode,c.errorCode.systemCode=a.systemCode,!a.sessionId&&b.b?(c.method="generateRequest",45==a.systemCode&&(c.message="Unsupported session type."),b.b.reject(c),b.b=null):a.sessionId&&b.a?(c.method="update",b.a.reject(c),b.a=null):(c=a.systemCode,a.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?kb(b,"output-restricted"):1==c?kb(b,"expired"):kb(b,"internal-error"))}},c(ib,oa),Se=ib.prototype,Se.Qa=function(a,b){if(this.a)this.a.then(this.Qa.bind(this,a,b))["catch"](this.Qa.bind(this,a,b));else{this.a=a;var c,d;"webkit-org.w3.clearkey"==this.c?(c=Va(new Uint8Array(b)),d=JSON.parse(c),"oct"!=d.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),c=Xa(d.keys[0].k),d=Xa(d.keys[0].kid)):(c=new Uint8Array(b),d=null);try{this.f.webkitAddKey(this.c,c,d,this.sessionId)}catch(e){this.a.reject(e),this.a=null}}},Se.generateRequest=function(a,b){return jb(this,b,null)},Se.load=function(a){return"persistent-license"==this.g?jb(this,null,a):Promise.reject(Error("Not a persistent session."))},Se.update=function(a){var b=new ra;return this.Qa(b,a),b},Se.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;this.f.webkitCancelKeyRequest(this.c,this.sessionId)}return this.closed.resolve(),this.closed},Se.remove=function(){return"persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close()},lb.prototype.next=function(){return this.a>=this.b.length?{value:void 0,done:!0}:{value:this.b[this.a++],done:!1}};var hf;Se=mb.prototype,Se.Ma=function(a){this.size=void 0==a?0:1,this.a=a},Se.Fa=function(){return this.a},Se.entries=function(){var a=hf,b=[];return this.a&&b.push([a,this.a]),new lb(b)},Se.forEach=function(a){this.a&&a(this.a,hf)},Se.get=function(a){return this.has(a)?this.a:void 0},Se.has=function(a){var b=hf;return!(!this.a||!Za(new Uint8Array(a),b))},Se.keys=function(){var a=hf,b=[];return this.a&&b.push(a),new lb(b)},Se.values=function(){var a=[];return this.a&&a.push(this.a),new lb(a)},pb.prototype.createMediaKeys=function(){var a=new rb(this.keySystem);return Promise.resolve(a)},pb.prototype.getConfiguration=function(){return this.a},rb.prototype.createSession=function(a){if("temporary"!=(a||"temporary"))throw new TypeError("Session type "+a+" is unsupported on this platform.");return new tb(this.a)},rb.prototype.setServerCertificate=function(){return Promise.reject(Error("setServerCertificate not supported on this platform."))},c(tb,oa),Se=tb.prototype,Se.generateRequest=function(a,b){this.a=new ra;try{this.c=this.g.createSession("video/mp4",b),la(this.f,this.c,"mskeymessage",this.Db.bind(this)),la(this.f,this.c,"mskeyadded",this.Bb.bind(this)),la(this.f,this.c,"mskeyerror",this.Cb.bind(this)),wb(this,"status-pending")}catch(c){this.a.reject(c)}return this.a},Se.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},Se.update=function(a){this.b=new ra;try{this.c.update(a)}catch(b){this.b.reject(b)}return this.b},Se.close=function(){try{this.c.close(),this.closed.resolve(),ma(this.f)}catch(a){this.closed.reject(a)}return this.closed},Se.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},Se.Db=function(a){this.a&&(this.a.resolve(),this.a=null),a=Y({type:"message",messageType:void 0==this.keyStatuses.Fa()?"licenserequest":"licenserenewal",message:a.message.buffer}),this.dispatchEvent(a)},Se.Bb=function(){this.a?(this.a.resolve(),this.a=null):this.b&&(wb(this,"usable"),this.b.resolve(),this.b=null)},Se.Cb=function(){var a=Error("EME v20140218 key error");if(a.errorCode=this.c.error,null!=this.a)this.a.reject(a),this.a=null;else if(null!=this.b)this.b.reject(a),this.b=null;else switch(this.c.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:wb(this,"output-not-allowed");default:wb(this,"internal-error")}},xb.prototype.next=function(){return this.a>=this.b.length?{value:void 0,done:!0}:{value:this.b[this.a++],done:!1}};var jf;Se=yb.prototype,Se.Ma=function(a){this.size=void 0==a?0:1,this.a=a},Se.Fa=function(){return this.a},Se.entries=function(){var a=jf,b=[];return this.a&&b.push([a,this.a]),new xb(b)},Se.forEach=function(a){this.a&&a(this.a,jf)},Se.get=function(a){return this.has(a)?this.a:void 0},Se.has=function(a){var b=jf;return!(!this.a||!Za(new Uint8Array(a),b))},Se.keys=function(){var a=jf,b=[];return this.a&&b.push(a),new xb(b)},Se.values=function(){var a=[];return this.a&&a.push(this.a),new xb(a)},b("shaka.polyfill.MediaKeys.install",zb),b("shaka.polyfill.installAll",function(){q(),s(),G(),z(),zb()});var kf=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;Se=Ab.prototype,Se.P="",Se.ca="",Se.S="",Se.ia=null,Se.O="",Se.aa="",Se.toString=function(){var a=[],b=this.P;if(b&&a.push(Fb(b,lf,!0),":"),b=this.S){a.push("//");var c=this.ca;c&&a.push(Fb(c,lf,!0),"@"),a.push(encodeURIComponent(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.ia,null!=b&&a.push(":",String(b))}return(b=this.O)&&(this.S&&"/"!=b.charAt(0)&&a.push("/"),a.push(Fb(b,"/"==b.charAt(0)?nf:mf,!0))),(b=this.a.toString())&&a.push("?",b),(b=this.aa)&&a.push("#",Fb(b,pf)),a.join("")},Se.resolve=function(a){var b=this.clone();"data"===b.P&&(b=new Ab);var c=!!a.P;c?Bb(b,a.P):c=!!a.ca,c?b.ca=a.ca:c=!!a.S,c?b.S=a.S:c=null!=a.ia;var d=a.O;if(c)Cb(b,a.ia);else if(c=!!a.O){if("/"!=d.charAt(0))if(this.S&&!this.O)d="/"+d;else{var e=b.O.lastIndexOf("/");-1!=e&&(d=b.O.substr(0,e+1)+d)}if(".."==d||"."==d)d="";else if(-1!=d.indexOf("./")||-1!=d.indexOf("/.")){for(var e=0==d.lastIndexOf("/",0),d=d.split("/"),f=[],g=0;g<d.length;){var h=d[g++];"."==h?e&&g==d.length&&f.push(""):".."==h?((1<f.length||1==f.length&&""!=f[0])&&f.pop(),e&&g==d.length&&f.push("")):(f.push(h),e=!0)}d=f.join("/")}}return c?b.O=d:c=""!==a.a.toString(),c?Db(b,a.a.clone()):c=!!a.aa,c&&(b.aa=a.aa),b},Se.clone=function(){return new Ab(this)};var lf=/[#\/\?@]/g,mf=/[\#\?:]/g,nf=/[\#\?]/g,of=/[\#\?@]/g,pf=/#/g;Hb.prototype.a=null,Hb.prototype.c=null,Hb.prototype.toString=function(){if(this.b)return this.b;if(!this.a)return"";var a,b=[];for(a in this.a)for(var c=encodeURIComponent(a),d=this.a[a],e=0;e<d.length;e++){var f=c;""!==d[e]&&(f+="="+encodeURIComponent(d[e])),b.push(f)}return this.b=b.join("&")},Hb.prototype.clone=function(){var a=new Hb;if(a.b=this.b,this.a){var b,c={};for(b in this.a)c[b]=this.a[b].concat();a.a=c,a.c=this.c}return a},Tb.prototype.clone=function(){var a=new Tb;return a.s=ic(this.s),a.g=this.g,a.f=this.f,a.a=jc(this.a),a.b=jc(this.b),a.c=jc(this.c),a},Ub.prototype.clone=function(){var a=new Ub;return a.url=ic(this.url),a.a=jc(this.a),a},Vb.prototype.clone=function(){var a=new Vb;return a.url=ic(this.url),a.a=jc(this.a),a},Wb.prototype.clone=function(){var a=new Wb;return a.s=ic(this.s),a.f=this.f,a.g=this.g,a.b=this.b,a.i=this.i,a.h=jc(this.h),a.a=ic(this.a)||[],a.c=jc(this.c),a},Xb.prototype.clone=function(){var a=new Xb;return a.b=ic(this.b),a.a=jc(this.a),a},Yb.prototype.clone=function(){var a=new Yb;return a.a=this.a,a.i=this.i,a.b=this.b,a.j=this.j,a.h=this.h,a.f=this.f,a.g=this.g,a.c=jc(this.c),a},Zb.prototype.clone=function(){var a=new Zb;return a.a=ic(this.a)||[],a},$b.prototype.clone=function(){var a=new $b;return a.b=this.b,a.a=this.a,a.c=this.c,a},_b.prototype.clone=function(){return new _b(this.na,this.end)},Jb.TAG_NAME="MPD",Kb.TAG_NAME="Period",Lb.TAG_NAME="AdaptationSet",Mb.TAG_NAME="Role",Nb.TAG_NAME="ContentComponent",Ob.TAG_NAME="Representation",Pb.TAG_NAME="ContentProtection",Qb.TAG_NAME="cenc:pssh",Rb.TAG_NAME="BaseURL",Sb.TAG_NAME="Location",Tb.TAG_NAME="SegmentBase",Ub.TAG_NAME="RepresentationIndex",Vb.TAG_NAME="Initialization",Wb.TAG_NAME="SegmentList",Xb.TAG_NAME="SegmentURL",Yb.TAG_NAME="SegmentTemplate",Zb.TAG_NAME="SegmentTimeline",$b.TAG_NAME="S",Jb.prototype.parse=function(a,b){this.url=a.s,this.id=kc(b,"id",rc),this.type=kc(b,"type",rc)||"static",this.b=kc(b,"mediaPresentationDuration",mc),this.h=kc(b,"minBufferTime",mc,this.h),this.g=kc(b,"minimumUpdatePeriod",mc,this.g),this.c=kc(b,"availabilityStartTime",lc,this.c),this.f=kc(b,"timeShiftBufferDepth",mc,this.f),this.i=kc(b,"suggestedPresentationDelay",mc,this.i);var c=a.s,d=gc(this,b,Rb);this.s=bc(c,d),(d=ec(this,b,Sb))&&(this.j=cc(c,d.url)),this.a=gc(this,b,Kb)},Kb.prototype.parse=function(a,b){this.id=kc(b,"id",rc),this.start=kc(b,"start",mc),this.a=kc(b,"duration",mc);var c=gc(this,b,Rb);this.s=bc(a.s,c),this.c=ec(this,b,Tb),this.f=ec(this,b,Wb),this.g=ec(this,b,Yb),this.b=gc(this,b,Lb),ac(this)},Lb.prototype.parse=function(a,b){var c=ec(this,b,Nb)||{},d=ec(this,b,Mb);this.id=kc(b,"id",rc),this.group=kc(b,"group",qc),this.lang=kc(b,"lang",rc,c.lang),this.contentType=kc(b,"contentType",rc,c.contentType),this.width=kc(b,"width",pc),this.height=kc(b,"height",pc),this.b=kc(b,"mimeType",rc),this.i=kc(b,"codecs",rc),this.c=d&&"main"==d.value,this.lang&&(this.lang=_(this.lang)),c=gc(this,b,Rb),this.s=bc(a.s,c),this.j=gc(this,b,Pb),!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]),this.f=a.c?dc(this,b,a.c):ec(this,b,Tb),this.g=a.f?dc(this,b,a.f):ec(this,b,Wb),this.h=a.g?dc(this,b,a.g):ec(this,b,Yb),this.a=gc(this,b,Ob),!this.b&&this.a.length&&(this.b=this.a[0].f,!this.contentType&&this.b&&(this.contentType=this.b.split("/")[0]))},Mb.prototype.parse=function(a,b){this.value=kc(b,"value",rc)},Nb.prototype.parse=function(a,b){this.id=kc(b,"id",rc),this.lang=kc(b,"lang",rc),this.contentType=kc(b,"contentType",rc),this.lang&&(this.lang=_(this.lang))},Ob.prototype.parse=function(a,b){this.id=kc(b,"id",rc),this.bandwidth=kc(b,"bandwidth",pc),this.width=kc(b,"width",pc,a.width),this.height=kc(b,"height",pc,a.height),this.f=kc(b,"mimeType",rc,a.b),this.h=kc(b,"codecs",rc,a.i),this.lang=a.lang;var c=gc(this,b,Rb);this.s=bc(a.s,c),this.c=gc(this,b,Pb),this.g=a.f?dc(this,b,a.f):ec(this,b,Tb),this.b=a.g?dc(this,b,a.g):ec(this,b,Wb),this.a=a.h?dc(this,b,a.h):ec(this,b,Yb),this.c=this.c.concat(a.j)},Pb.prototype.parse=function(a,b){this.f=b,this.c=kc(b,"schemeIdUri",rc);var c=kc(b,"cenc:default_KID",rc);c&&(this.b=c.replace(/[-]/g,"")),this.a=ec(this,b,Qb)},Qb.prototype.parse=function(a,b){var c=hc(b);if(c){this.psshBox=Xa(c);try{this.parsedPssh=new nb(this.psshBox)}catch(d){if(!(d instanceof RangeError))throw d}}},Rb.prototype.parse=function(a,b){this.url=hc(b)},Sb.prototype.parse=function(a,b){this.url=hc(b)},Tb.prototype.parse=function(a,b){this.s=a.s||this.s,this.g=kc(b,"timescale",pc,this.g),this.f=kc(b,"presentationTimeOffset",qc,this.f),this.a=kc(b,"indexRange",nc,this.a),this.b=ec(this,b,Ub)||this.b,this.c=ec(this,b,Vb)||this.c},Ub.prototype.parse=function(a,b){var c=kc(b,"sourceURL",rc);this.url=cc(a.s,c),this.a=kc(b,"range",nc,jc(a.a))},Vb.prototype.parse=function(a,b){var c=kc(b,"sourceURL",rc);this.url=cc(a.s,c),this.a=kc(b,"range",nc)},Wb.prototype.parse=function(a,b){this.s=a.s||this.s,this.f=kc(b,"timescale",pc,this.f),this.g=kc(b,"presentationTimeOffset",qc,this.g),this.b=kc(b,"duration",pc,this.b);var c=kc(b,"startNumber",pc);null!=c&&(this.i=c),this.h=ec(this,b,Vb)||this.h,this.a=(c=gc(this,b,Xb))&&0<c.length?c:this.a,this.c=ec(this,b,Zb)||this.c},Xb.prototype.parse=function(a,b){var c=kc(b,"media",rc);this.b=cc(a.s,c),this.a=kc(b,"mediaRange",nc)},Yb.prototype.parse=function(a,b){this.a=kc(b,"timescale",pc,this.a),this.i=kc(b,"presentationTimeOffset",qc,this.i),this.b=kc(b,"duration",pc,this.b);var c=kc(b,"startNumber",qc);null!=c&&(this.j=c),this.h=kc(b,"media",rc,this.h),this.f=kc(b,"index",rc,this.f),this.g=kc(b,"initialization",rc,this.g),this.c=ec(this,b,Zb)||this.c},Zb.prototype.parse=function(a,b){this.a=gc(this,b,$b)},$b.prototype.parse=function(a,b){this.b=kc(b,"t",qc),this.a=kc(b,"d",qc),this.c=kc(b,"r",oc)};var qf=!0;Se=sc.prototype,Se.rb=function(){if(this.a)return this.c;if(0==this.url.lastIndexOf("data:",0)){var b=this.url.split(":")[1].split(";").pop().split(","),c=b.pop(),c="base64"==b.pop()?a.atob(c.replace(/-/g,"+").replace(/_/g,"/")):a.decodeURIComponent(c);return"arraybuffer"==this.b.f&&(c=Wa(c).buffer),b=JSON.parse(JSON.stringify(new XMLHttpRequest)),b.response=c,b.responseText=c.toString(),c=this.c,c.resolve(b),uc(this),c}if(0==this.url.lastIndexOf("idb:",0))return wc(this);this.h++,this.i=Date.now(),this.g||(this.g=this.b.h),this.a=new XMLHttpRequest,b=this.url,qf&&(this.f&&!this.f.supportsCaching()||this.b.g)&&(b=new Ab(b),Ib(b.a,"_",Date.now()),b=b.toString()),this.a.open(this.b.method,b,!0),this.a.responseType=this.b.f,this.a.timeout=this.b.c,this.a.withCredentials=this.b.j,this.a.onload=this.zb.bind(this),this.b.g&&(this.a.onreadystatechange=this.Gb.bind(this)),this.a.onerror=this.Xb.bind(this),this.a.ontimeout=this.Lb.bind(this);for(c in this.b.b)this.a.setRequestHeader(c,this.b.b[c]);return this.a.send(this.b.body),this.c},Se.zb=function(a){this.f&&this.f.sample(Date.now()-this.i,a.loaded),200<=this.a.status&&299>=this.a.status?(this.c.resolve(this.a),uc(this)):this.h<this.b.a?yc(this):(a=xc(this,"HTTP error.","net"),this.c.reject(a),uc(this))},Se.Gb=function(){if(this.a.readyState==XMLHttpRequest.HEADERS_RECEIVED){var a=Date.parse(this.a.getResponseHeader("Date"));a&&(af=a-Date.now())}},Se.Xb=function(){var a=xc(this,"Network failure.","net");this.c.reject(a),uc(this)},Se.Lb=function(){if(this.h<this.b.a)yc(this);else{var a=xc(this,"Request timed out.","net");this.c.reject(a),uc(this)}},zc.prototype.g=function(){if(this.c){this.a=null;var a=this.c;if(a.a&&a.a.readyState!=XMLHttpRequest.DONE){a.a.abort();var b=xc(a,"Request aborted.","aborted");a.c.reject(b),uc(a)}this.c=null}},zc.prototype.clone=function(){return new zc(this.i,this.b.map(function(a){return a.clone()}),this.f,this.h)},zc.prototype.toString=function(){return this.b[0].toString()},Jc.prototype.destroy=function(){this.a&&(this.a.g(),this.a=null),this.b=null},Jc.prototype.create=function(){return this.a?Bc(this.a):Promise.resolve(this.b)},Oc.prototype.parse=function(a,b,c,d){var e=null;try{a:{var f=[],g=new K(a),h=N(g);if(1936286840!=N(g))e=null;else{1==h&&(h=O(g));var i=M(g);Q(g,3),Q(g,4);var j=N(g);if(0==j)e=null;else{var k,l;0==i?(k=N(g),l=N(g)):(k=O(g),l=O(g)),Q(g,2);var m=g.b.getUint16(g.a,g.c);for(g.a+=2,a=k,b=b+h+l,h=0;m>h;h++){var n=N(g);l=(2147483648&n)>>>31;var i=2147483647&n,o=N(g);if(N(g),1==l){e=null;break a}var p=new zc(d,c,b,b+i-1);f.push(new Kc(a/j,(a+o)/j,p)),a+=o,b+=i}e=f}}}}catch(q){if(!(q instanceof RangeError))throw q}return e},Pc.prototype.destroy=function(){this.o=null},Se=Pc.prototype,Se.length=function(){return this.o.length},Se.A=function(){if(0==this.o.length)throw new RangeError("SegmentIndex: There is no last SegmentReference.");return this.o[this.o.length-1]},Se.get=function(a){if(0>a||a>=this.o.length)throw new RangeError("SegmentIndex: The specified index is out of range.");return this.o[a]},Se.la=function(a){return a=Mc(this.o,a),a>=0?this.o[a]:null},Se.Ha=function(a){return Rc(this,a),!0},Se.ka=function(a){var b=a-this.i;return 0==b?0:(this.o=Nc(this.o,b),this.i=a,b)},Se.Ea=function(){return 0<this.length()?{start:Qc(this).b,end:this.A().a}:{start:0,end:0}},c(Sc,Pc),Sc.prototype.destroy=function(){this.w=this.g=null,Pc.prototype.destroy.call(this)},Sc.prototype.la=function(a){return Vc(this,J()/1e3),Pc.prototype.la.call(this,a)},Sc.prototype.Ha=function(a){return a instanceof Sc?(Rc(this,a),this.h=Math.max(this.h,a.h),null==this.c?(this.f=a.f,Tc(this)):Wc(this),!0):!1},Sc.prototype.ka=function(a){return a=Pc.prototype.ka.call(this,a),Math.min.apply(null,this.o.filter(function(a){return null!=a.a}).map(function(a){return a.a-a.b})),null!=this.c&&(this.l+=a,this.a+=a,this.c+=a),a},Sc.prototype.Ea=function(){return Uc(this,J()/1e3)},c(Xc,Sc),Xc.prototype.destroy=function(){this.B=this.u=null,Sc.prototype.destroy.call(this)},Xc.prototype.la=function(a){var b=J()/1e3;return Yc(this,b),Vc(this,b),Pc.prototype.la.call(this,a)},Xc.prototype.Ha=function(a){return null==this.b&&a instanceof Xc&&null!=a.b?(this.b=a.b,this.v=a.v,this.j=a.j,this.f=a.f,this.h=a.h,Rc(this,a),Yc(this,J()/1e3),Tc(this),!0):!1},Xc.prototype.ka=function(a){return a=Sc.prototype.ka.call(this,a),null!=this.b&&(this.b+=a,this.v+=a),a},Xc.prototype.Ea=function(){var a=J()/1e3;return Yc(this,a),Uc(this,a)},Zc.prototype.destroy=function(){this.g=this.c=this.b=this.f=null,this.a&&(this.a.destroy(),this.a=null)},Zc.prototype.create=function(){if(this.a)return Promise.resolve(this.a);if("dynamic"==this.f.type)try{this.a=new Xc(this.f,this.b,this.c,this.h,this.g)}catch(a){return Promise.reject(a)}else{var b;if(b=this.c.a,b=Fc(this.g,this.c,1,Math.ceil(this.b.a/(b.b/b.a)))){if(0<b.length){var c=b[b.length-1];b[b.length-1]=Lc(c,c.b,this.b.a)}b=new Pc(b)}else b=null;if(this.a=b,!this.a)return b=Error("Failed to generate SegmentReferences"),b.type="stream",Promise.reject(b)}return Promise.resolve(this.a)},$c.prototype.destroy=function(){this.f=this.g=this.b=this.c=null,this.a&&(this.a.destroy(),this.a=null)},$c.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var a=this.g.b,b=[];a.c&&(b=Ic(a.c,a.f||1,this.b.a||0));var c=0;a.b&&a.i?c=(a.i-1)*a.b:0<b.length&&(c=b[0].start-(a.g||0));var d=a.a.length;0<b.length&&b.length!=a.a.length&&(d=Math.min(b.length,a.a.length));for(var e=[],f=0;d>f;++f){var g=a.a[f],h=c/a.f,i=null,j=null;a.b?(i=c+a.b,j=i/a.f):0<b.length?(i=b[f].end-(a.g||0),j=i/a.f):(j=h+this.b.a,i=j*a.f);var c=i,i=0,k=null;g.a&&(i=g.a.na,k=g.a.end),e.push(new Kc(h,j,new zc(this.f,g.b,i,k)))}return"dynamic"==this.c.type?this.a=new Sc(e,this.c,this.b,this.h):this.a=new Pc(e),Promise.resolve(this.a)},_c.prototype.destroy=function(){this.g=this.f=this.c=this.b=null,this.a&&(this.a.destroy(),this.a=null)},_c.prototype.create=function(){if(this.a)return Promise.resolve(this.a);for(var a=this.f.a,b=Ic(a.c,a.a||1,this.c.a||0),c=[],d=0;d<b.length;++d){var e=b[d].start,f=e/a.a,g=b[d].end/a.a,e=Gc(this.g,this.f,d+a.j,e);if(!e)return a=Error("Failed to generate media URL."),a.type="dash",Promise.reject(a);var h=(a.i||0)/a.a;c.push(new Kc(f-h,g-h,e))}return"dynamic"==this.b.type?this.a=new Sc(c,this.b,this.c,this.h):this.a=new Pc(c),Promise.resolve(this.a)},ad.prototype.destroy=function(){this.b=null,this.a&&(this.a.destroy(),this.a=null)},ad.prototype.create=function(){if(this.a)return Promise.resolve(this.a);for(var a=[],b=0;b<this.b.length;++b){var c=this.b[b];a.push(new Kc(c.start_time,c.end_time,new zc(null,[new Ab(c.url)],c.start_byte,null)))}return this.b=null,this.a=new Pc(a),Promise.resolve(this.a)};var rf=0;bd.prototype.destroy=function(){this.H&&(this.H.destroy(),this.H=null),this.D&&(this.D.destroy(),this.D=null)};var sf=0;dd.prototype.destroy=function(){for(var a=0;a<this.m.length;++a)this.m[a].destroy();this.a=this.m=null},fd.prototype.destroy=function(){for(var a=0;a<this.a.length;++a)this.a[a].destroy();this.a=null},gd.prototype.destroy=function(){for(var a=0;a<this.a.length;++a)this.a[a].destroy();this.a=null},c(id,oa),id.prototype.G=function(a){null!=a.initialStreamBufferSize&&(this.B=Number(a.initialStreamBufferSize)),null!=a.streamBufferSize&&(this.L=Number(a.streamBufferSize)),null!=a.segmentRequestTimeout&&(this.a.u=Number(a.segmentRequestTimeout))},id.prototype.destroy=function(){pd(this),this.h.destroy(),this.b=this.h=null,this.a.destroy(),this.v=this.c=this.a=null},Se=id.prototype,Se.oa=function(){return this.b},Se.cb=function(){return this.I},Se.sb=function(a){return this.f||a.then(function(){this.f=!0,this.g||od(this,0)}.bind(this))["catch"](function(){}),this.h},Se.Ga=function(){return this.j},Se.ra=function(a,b,c){if(a!=this.b){var d=[a.H.create(),a.D.create()];Promise.all(d).then(xa(this,function(d){if(this.c){var e=this.b;this.b=a,this.I=d[0],this.w=d[1],this.K=!0,this.l||(e?b&&jd(this,!0,c):od(this,0))}}))["catch"](xa(this,function(a){"aborted"!=a.type&&(this.f?(a=Z(a),this.dispatchEvent(a)):this.h.reject(a))}))}},Se.kb=function(){return jd(this,!1)},Se.lb=function(a){return 0<Na(this.a,a)&&0<=Mc(this.a.b,a)},Se.va=function(){},Se.Da=function(){return!0},Se.Nb=function(){if(this.u&&!this.f)this.g=null;else{var a;if((a=this.f&&!this.j)&&(a=1<this.a.c.buffered.length),a)jd(this,!0);else{this.g=null,a=this.b;var b=this.I,c=this.c.currentTime;Na(this.a,this.u?c:c+(this.i||0))>=(this.u?Math.max(this.B,this.L):this.B)?(ld(this),od(this,1e3/(Math.abs(this.c.playbackRate)||1))):(b=kd(this,c,b))?(b=Oa(this.a,b,a.c,this.w),this.w=null,this.K&&(this.K=!1,md(this,a)),this.j=!1,b.then(xa(this,function(a){null==this.i&&(this.i=a),this.F&&0<Na(this.a,c)&&(this.F=!1,this.c.currentTime+=.001),od(this,0)}))["catch"](xa(this,function(a){if("aborted"!=a.type){var b=[0,404,410];"net"==a.type&&-1!=b.indexOf(a.ac.status)&&this.b&&od(this,5e3),a=Z(a),this.dispatchEvent(a)}}))):(ld(this),this.f&&!this.j&&(this.j=!0,nd(this)),od(this,1e3))}}},qd.prototype.destroy=function(){this.a&&(this.a.destroy(),this.a=null)},qd.prototype.create=function(){if(this.a)return Promise.resolve(this.a);var a=new Kc(0,null,this.b);return this.a=new Pc([a]),Promise.resolve(this.a)},c(rd,oa),rd.prototype.G=function(){},rd.prototype.destroy=function(){this.a&&this.b.removeChild(this.a),this.c.destroy(),this.v=this.b=this.f=this.h=this.a=this.c=null},Se=rd.prototype,Se.oa=function(){return this.f},Se.cb=function(){return this.h},Se.sb=function(){return this.c},Se.Ga=function(){return!0},Se.ra=function(a){a.H.create().then(xa(this,function(b){if(this.b){if(0==b.length())return Promise.reject(Error("No subtitles URL available."));var c=this.f;this.f=a,this.h=b,b=Qc(b).url.b[0].toString();var d=this.Da();this.a&&(this.va(!1),this.b.removeChild(this.a)),this.a=document.createElement("track"),this.b.appendChild(this.a),this.a.src=b,this.va(d),b=Y({type:"adaptation",bubbles:!0,contentType:"text",size:null,bandwidth:a.bandwidth}),this.dispatchEvent(b),c||this.c.resolve(0)}}))},Se.kb=function(){},Se.lb=function(){return!0},Se.va=function(a){this.g=a,this.a&&(this.a.track.mode=a?"showing":"disabled")},Se.Da=function(){return this.a&&(this.g="showing"==this.a.track.mode),this.g},sd.prototype.parse=function(a,b,c,d){var e=null;try{var f,g=new R(b);if(440786851!=S(g).id)f=null;else{var h=S(g);if(408125543!=h.id)f=null;else{var i,j=h.a.byteOffset,k=new R(h.a);for(b=null;L(k.a);){var l=S(k);if(357149030==l.id){b=l;break}}if(b){for(var m=new R(b.a),k=1e6;L(m.a);){var n=S(m);if(2807729==n.id){k=V(n);break}}i=k/1e9}else i=null;f=i?{Tb:j,Yb:i}:null}}if(f){var o=S(new R(a));if(475249515!=o.id)e=null;else{var p=f.Tb,q=f.Yb;a=[];var r=new R(o.a);for(f=o=-1;L(r.a);){var s=S(r);if(187==s.id){var t,u=new R(s.a),v=S(u);if(179!=v.id)t=null;else{var w=V(v),x=S(u);if(183!=x.id)t=null;else{for(var y=new R(x.a),j=0;L(y.a);){var z=S(y);if(241==z.id){j=V(z);break}}t={$b:w,Sb:j}}}if(t){var A=q*t.$b,B=p+t.Sb;if(o>=0){var C=new zc(d,c,f,B-1);a.push(new Kc(o,A,C))}o=A,f=B}}}o>=0&&(C=new zc(d,c,f,null),a.push(new Kc(o,null,C))),e=a}}else e=null}catch(D){if(!(D instanceof RangeError))throw D}return e},td.prototype.destroy=function(){this.h=this.i=this.g=null,this.a.g(),this.a=null,this.c&&(this.c.g(),this.c=null),this.b=null},td.prototype.create=function(){if(this.b)return this.b;var a=[Bc(this.a)];return"webm"==this.f&&a.push(Bc(this.c)),this.b=Promise.all(a).then(xa(this,function(a){var b=a[0];a=a[1]||null;var c=null;if("mp4"==this.f?(c=new Oc,c=c.parse(new DataView(b),this.a.f,this.a.b,this.h)):"webm"==this.f&&(c=new sd,c=c.parse(new DataView(b),new DataView(a),this.a.b,this.h)),!c)return b=Error("Failed to parse SegmentReferences from "+this.a.toString()+" (or one of its fallbacks)."),b.type="stream",Promise.reject(b);var d;return d="dynamic"==this.g.type?new Sc(c,this.g,this.i,this.j):new Pc(c),Promise.resolve(d)}))},c(Kd,ya),Kd.prototype.g=function(a,b,c){var d=new ra;a={stream_id:c.qa,mime_type:a.a,codecs:a.b,init_segment:b,references:c.o};var e=Da(this).put(a);return e.onsuccess=function(){d.resolve(c.qa)},e.onerror=function(){d.reject(e.error)},d},Kd.prototype.f=function(a,b){for(var c=Promise.resolve(),d=0;d<a.length();++d)var e=a.get(d),f=d==a.length()-1,f=this.c.bind(this,e,b,f),c=c.then(this.i.bind(this,e)),c=c.then(f);return c.then(function(){return Promise.resolve(b)})["catch"](xa(this,function(a){return Qd(this,b.qa),Promise.reject(a)}))},Kd.prototype.c=function(a,b,c,d){var e=new ra;0==b.ja.byteLength&&(b.Ca=a),b.ja=Pd(b.ja,d),b.jb++;var f=Y({type:"progress",detail:b.jb/b.Zb*100,bubbles:!0});if(1048576<=b.ja.byteLength||c){c={stream_id:b.qa,segment_id:b.Ja,content:b.ja};var g=Ca(this).put(c);b.o.push({start_time:b.Ca.b,start_byte:b.Ca.url.f,end_time:a.a,url:"idb://"+b.qa+"/"+b.Ja}),b.Ja++,b.ja=new ArrayBuffer(0),g.onerror=function(){e.reject(g.error)},g.onsuccess=xa(this,function(){this.dispatchEvent(f),e.resolve()})}else this.dispatchEvent(f),e.resolve();return e},Kd.prototype.i=function(a){var b=new tc;return b.c=1e3*this.b,Bc(a.url,b,this.j)},c(Td,oa),Td.prototype.destroy=function(){this.v=null;for(var b=0;b<this.f.length;++b)this.f[b].close()["catch"](function(){});this.f=[],this.c=this.a=this.i=null,this.g.destroy(),this.g=null,this.l.destroy(),this.l=null,this.j&&(a.clearTimeout(this.j),this.j=null),this.h=this.b=null},Td.prototype.initialize=function(){for(var a=new ga,b=this.b.bb(),c=0;c<b.length;++c){var d=b[c];d.a.a||d.b&&!be(d.b)||a.push(d.contentType,d)}for(var c={},d=!1,e=0;e<b.length;++e){var f=b[e];if(f.a.a&&!a.a.hasOwnProperty(f.contentType)){var g=f.a.a,h=c[g];if(h||(h=f.a,h={audioCapabilities:void 0,videoCapabilities:void 0,initDataTypes:void 0,distinctiveIdentifier:h.g?"required":"optional",persistentState:h.v||this.b.ha()?"required":"optional",sessionTypes:[this.b.ha()?"persistent-license":"temporary"]},c[g]=h),f.b&&(g=f.contentType+"Capabilities",g in h)){d=!0,h[g]||(h[g]=[]);var i;"audio"==f.contentType?i=f.a.f:"video"==f.contentType&&(i=f.a.j),h[g].push({contentType:f.b,robustness:i})}}}if(!d){if(!b.length)throw a=Error("No DrmInfo exists!"),a.type="drm",a;this.a=b[0].a}return 0==Object.keys(c).length?(this.b.Ka(a),this.g.resolve(),Promise.resolve()):(i=new ra,c=Wd(this,c,i),c=c.then(this.tb.bind(this,b,a)),c=c.then(this.Ub.bind(this)),i.reject(null),c)},Se=Td.prototype,
Se.tb=function(a,b,c){if(!this.h)return Xd();for(var d=c.keySystem,e=c.getConfiguration(),f=["audio","video"],g=0;g<f.length;++g){var h=f[g];if(!b.a.hasOwnProperty(h)){var i=e[h+"Capabilities"];if(i&&i.length){for(var i=i[0],j=[],k={},l=0;l<a.length;++l){var m=a[l];if(m.a.a==d&&m.b==i.contentType&&!(m.id in k)){j.push(m),k[m.id]=!0;var n;if(this.a){n=this.a;var m=m.a,o=new $a;o.a=n.a,o.h=n.h,o.i=n.i,o.l=n.l,o.u=n.u,o.g=n.g,o.v=n.v,o.f=n.f,o.j=n.j,o.c=n.c?new Uint8Array(n.c.buffer):null,ab(o,n.b),ab(o,m.b),n=o}else n=m.a;this.a=n}}b.set(h,j)}}}return this.b.Ka(b),c.createMediaKeys()},Se.Ub=function(a){return this.h?(this.i=a,this.h.setMediaKeys(this.i).then(xa(this,function(){return this.h?this.a.c?this.i.setServerCertificate(this.a.c):Promise.resolve():Xd()})).then(xa(this,function(){if(!this.h)return Xd();if(0<this.b.ua().length)Yd(this);else{for(var a=0;a<this.a.b.length;++a){var b=this.a.b[a];this.eb({type:"encrypted",initDataType:b.initDataType,initData:b.initData})}0==this.a.b.length&&la(this.l,this.h,"encrypted",this.eb.bind(this))}}))):Xd()},Se.eb=function(a){for(var b=new Uint8Array(a.initData),c=0;c<this.c.length;++c)if(Za(b,this.c[c].data))return;try{var d=Zd(this)}catch(e){return b=Z(e),this.dispatchEvent(b),void this.g.reject(e)}a=d.generateRequest(a.initDataType,a.initData),this.c.push({data:b,La:d}),a["catch"](xa(this,function(a){if(this.h){for(var b=0;b<this.c.length;++b)if(this.c[b].La==d){this.c.splice(b,1);break}b=Z(a),this.dispatchEvent(b),this.g.reject(a)}})),this.f.push(d)},Se.Jb=function(a){$d(this,a.target,this.a,a.message)},Se.yb=function(a){a=a.target;for(var b=a.keyStatuses,c={},d=b.keys(),e=d.next();!e.done;e=d.next()){var f=Ya(new Uint8Array(e.value)),e=b.get(e.value);c[f]=e}if(a.expiration<Date.now()){for(b=0;b<this.c.length;++b)if(this.c[b].La==a){this.c.splice(b,1);break}a.close(),this.f.splice(this.f.indexOf(a),1)}this.b.fb(c)},c(ae,oa),b("shaka.player.Player",ae),ae.version="v1.6.2",ae.isBrowserSupported=function(){return!!(a.MediaSource&&a.MediaKeys&&a.navigator&&a.navigator.requestMediaKeySystemAccess&&a.MediaKeySystemAccess&&a.MediaKeySystemAccess.prototype.getConfiguration&&a.Promise&&Element.prototype.requestFullscreen&&document.exitFullscreen&&"fullscreenElement"in document&&a.Uint8Array)},ae.isTypeSupported=be,ae.setTextStyle=function(a){var b=document.getElementById("ShakaPlayerTextStyle");for(b||(b=document.createElement("style"),b.id="ShakaPlayerTextStyle",document.head.appendChild(b)),b=b.sheet;b.cssRules.length;)b.deleteRule(0);b.insertRule("::cue { "+l(a)+" }",0)},ae.prototype.destroy=function(){return this.u().then(xa(this,function(){this.f.destroy(),this.a=this.f=null}))["catch"](function(){})},ae.prototype.destroy=ae.prototype.destroy,ae.prototype.u=function(){if(!this.b)return Promise.resolve();this.h&&ge(this),this.a.pause(),ma(this.f),fe(this),de(this),this.j&&(this.j.destroy(),this.j=null),this.a.src="";var a=this.a.setMediaKeys(null);return this.b&&(this.b.destroy(),this.b=null),this.h=!1,this.g=new Gd,a},ae.prototype.unload=ae.prototype.u,ae.prototype.ea=function(a){var b=this.u();return this.a.autoplay&&(f("load"),la(this.f,this.a,"timeupdate",this.xb.bind(this))),a.T(this.c),a.pb(this.G),this.G=null,b=b.then(xa(this,function(){return a.X()})),b["catch"](xa(this,function(b){return a.destroy(),Promise.reject(b)})),b.then(xa(this,function(){return this.a?(this.b=a,la(this.f,this.b,"seekrangechanged",this.Hb.bind(this)),this.j=new Td(this,this.a,this.b),this.j.initialize()):ce()})).then(xa(this,function(){return this.a?(la(this.f,this.a,"error",this.Vb.bind(this)),la(this.f,this.a,"playing",this.Fb.bind(this)),la(this.f,this.a,"pause",this.Eb.bind(this)),this.b.Wa(this,this.a)):ce()})).then(xa(this,function(){return this.a?void ee(this):ce()}))["catch"](xa(this,function(a){if(!this.a)return ce();if("destroy"!=a.type){var b=Z(a);this.dispatchEvent(b)}return this.u().then(function(){return Promise.reject(a)})}))},ae.prototype.load=ae.prototype.ea,Se=ae.prototype,Se.xb=function(){g("load"),this.g.playbackLatency=h("load")/1e3,this.f.sa(this.a,"timeupdate")},Se.Vb=function(){if(this.a.error){var a=this.a.error.code;a!=MediaError.MEDIA_ERR_ABORTED&&(a=Error(tf[a]||"Unknown playback error."),a.type="playback",a=Z(a),this.dispatchEvent(a))}},Se.Fb=function(){f("playing"),!this.i&&0>this.l&&(this.a.playbackRate=0,this.B(this.a.currentTime,Date.now(),this.l)),this.h&&ge(this)},Se.Eb=function(){g("playing");var a=h("playing");if(!isNaN(a)){var b=this.g;b.playTime+=a/1e3}de(this)},Se.Hb=function(a){this.F=a.start},Se.qb=function(){if(!this.a.paused){g("playing");var a=h("playing");if(!isNaN(a)){var b=this.g;b.playTime+=a/1e3,f("playing")}}return a=this.g,b=this.a,b.getVideoPlaybackQuality&&(b=b.getVideoPlaybackQuality(),a.decodedFrames=b.totalVideoFrames,a.droppedFrames=b.droppedVideoFrames),this.g},ae.prototype.getStats=ae.prototype.qb,ae.prototype.da=function(){return this.b?this.b.ma():[]},ae.prototype.getVideoTracks=ae.prototype.da,ae.prototype.Y=function(){return this.b?this.b.pa():[]},ae.prototype.getAudioTracks=ae.prototype.Y,ae.prototype.$=function(){return this.b?this.b.Oa():[]},ae.prototype.getTextTracks=ae.prototype.$,ae.prototype.selectVideoTrack=function(a,b){return this.b?this.b.selectVideoTrack(a,void 0==b?!0:b):!1},ae.prototype.selectVideoTrack=ae.prototype.selectVideoTrack,ae.prototype.M=function(a,b){return this.b?this.b.nb(a,void 0==b?!0:b):!1},ae.prototype.selectAudioTrack=ae.prototype.M,ae.prototype.fa=function(a){return this.b?this.b.ob(a,!1):!1},ae.prototype.selectTextTrack=ae.prototype.fa,ae.prototype.V=function(a){this.b&&this.b.Na(a)},ae.prototype.enableTextTrack=ae.prototype.V,ae.prototype.T=function(a){de(this),a>=0?this.a.playbackRate=a:this.a.paused||(this.a.playbackRate=0,this.B(this.a.currentTime,Date.now(),a)),this.l=a},ae.prototype.setPlaybackRate=ae.prototype.T,ae.prototype.K=function(){return this.l},ae.prototype.getPlaybackRate=ae.prototype.K,ae.prototype.R=function(a){this.G=a},ae.prototype.setPlaybackStartTime=ae.prototype.R,ae.prototype.I=function(){return this.b?this.b.mb():!1},ae.prototype.isLive=ae.prototype.I,ae.prototype.U=function(a){if(a){var b=ba(a,"enableAdaptation");null!=b&&(this.c.enableAdaptation=b),b=ca(a,"streamBufferSize"),null!=b&&(this.c.streamBufferSize=b),b=ca(a,"liveStreamEndTimeout"),null!=b&&(this.c.liveStreamEndTimeout=b),b=ca(a,"licenseRequestTimeout"),null!=b&&(this.c.licenseRequestTimeout=b),b=ca(a,"mpdRequestTimeout"),null!=b&&(this.c.mpdRequestTimeout=b),b=ca(a,"segmentRequestTimeout"),null!=b&&(this.c.segmentRequestTimeout=b),b=da(a,"preferredLanguage"),null!=b&&(this.c.preferredLanguage=b),b=fa(a,"restrictions",j),null!=b&&(this.c.restrictions=b.clone()),a=ba(a,"disableCacheBustingEvenThoughItMayAffectBandwidthEstimation"),null!=a&&(qf=!a),this.b&&this.b.T(this.c)}},ae.prototype.configure=ae.prototype.U,ae.prototype.Z=function(){return this.c},ae.prototype.getConfiguration=ae.prototype.Z,ae.prototype.B=function(b,c,d){this.i=null;var e=(Date.now()-c)/1e3*d;this.a.currentTime<this.F+(this.I()?1:.05)?this.a.pause():(e=Math.max(this.F,b+e),this.a.currentTime=e,this.i=a.setTimeout(this.B.bind(this,b,c,d),250))},ae.prototype.L=function(){if(ee(this),!this.a.ended&&!this.a.seeking){var a=this.a.buffered,b=a.length?a.end(a.length-1):0,a=Math.max(b-this.a.currentTime,0),c=this.a.duration,c=isNaN(c)?0:Math.max(c-.05,0),b=b>=c||this.a.currentTime>=c;this.h?(c=this.b.ab(),(b||a>c)&&(ge(this),this.a.play())):!this.a.paused&&!b&&.5>a&&(this.h=!0,this.a.pause(),this.g.bufferingHistory.push(J()/1e3),f("buffering"),this.dispatchEvent(Y({type:"bufferingStart"})))}};var tf={2:"A network failure occured while loading media content.",3:"The browser failed to decode the media content.",4:"The browser does not support the media content."};ke.prototype.destroy=function(){this.a.destroy(),this.a=null},ke.prototype.update=function(a){var b=le(a),c=le(this.a);return Promise.all([b,c]).then(xa(this,function(b){var c=b[0];b=b[1];var d=this.a.a;return he(d),ie(d),a.f=this.a.f,a.g=this.a.g?this.a.g.clone():null,a.c=this.a.c,d=[],me(a,this.a,c,b,d),c=a.a,he(c),ie(c),Promise.resolve(d)}))},b("shaka.media.SimpleAbrManager",qe),qe.prototype.destroy=function(){this.f.destroy(),this.a=this.b=this.f=null},qe.prototype.initialize=function(a,b){this.b||this.a||(this.b=a,this.a=b)},qe.prototype.start=function(){this.b&&this.a&&!this.g&&(this.c=Date.now()+4e3,la(this.f,this.b,"bandwidth",this.v.bind(this)),la(this.f,this.a,"adaptation",this.j.bind(this)),la(this.f,this.a,"trackschanged",this.h.bind(this)),this.g=!0)},qe.prototype.enable=function(a){this.i=a},qe.prototype.getInitialVideoTrackId=function(){if(!this.b||!this.a)return null;var a=re(this);return a?a.id:null},qe.prototype.selectVideoTrack=function(a,b,c){this.g&&this.a.selectVideoTrack(a.id,b,c)},qe.prototype.v=function(){Date.now()<this.c||this.h()},qe.prototype.h=function(){if(this.i){var a=re(this);if(a){if(a.active)return void(this.c=Date.now()+3e3);this.selectVideoTrack(a,!1)}this.c=Number.POSITIVE_INFINITY}},qe.prototype.j=function(){this.c==Number.POSITIVE_INFINITY&&(this.c=Date.now()+3e4)},c(se,oa),b("shaka.player.HttpVideoSource",se),se.prototype.T=function(){},se.prototype.destroy=function(){this.a&&(this.a.parentElement.removeChild(this.a),this.a=null),this.v=this.b=null},Se=se.prototype,Se.Wa=function(a,b){this.v=a;var c=b.mediaKeys;return b.src=this.f,c=b.setMediaKeys(c),this.c&&(this.a=document.createElement("track"),this.a.src=this.c,b.appendChild(this.a),this.a.track.mode="showing"),c},Se.X=function(){return Promise.resolve()},Se.ma=function(){return[]},Se.pa=function(){return[]},Se.Oa=function(){return[]},Se.ab=function(){return 5},Se.bb=function(){var a=new hd;return a.a=this.b,[a]},Se.Ka=function(){},se.prototype.selectVideoTrack=function(){return!1},Se=se.prototype,Se.nb=function(){return!1},Se.ob=function(){return!1},Se.Na=function(a){this.a&&(this.a.track.mode=a?"showing":"disabled")},Se.pb=function(){},Se.ua=function(){return[]},Se.ha=function(){return!1},Se.mb=function(){return!1},Se.fb=function(a){for(var b in a){var c=a[b],d=cf[c]||null;if(d){var e=sa(b),d=Error("Key "+e+" is not usable. "+d);d.type="drm",d.code=c,c=Z(d),this.dispatchEvent(c)}}},c(te,oa),b("shaka.player.StreamVideoSource",te),te.prototype.T=function(a){null!=a.streamBufferSize&&(this.G.streamBufferSize=a.streamBufferSize),null!=a.segmentRequestTimeout&&(this.G.segmentRequestTimeout=a.segmentRequestTimeout),Me(this),null!=a.enableAdaptation&&this.I.enable(Boolean(a.enableAdaptation)),null!=a.mpdRequestTimeout&&(this.da=Number(a.mpdRequestTimeout)),null!=a.liveStreamEndTimeout&&(this.Ua=Number(a.liveStreamEndTimeout)),null!=a.preferredLanguage&&(this.K=_(String(a.preferredLanguage))),null!=a.restrictions&&(this.h=a.restrictions,this.L&&we(this))},te.prototype.destroy=function(){this.B.destroy(),this.ea.destroy(),this.ea=this.B=null,this.Y&&(a.clearTimeout(this.Y),this.Y=null),this.V&&(a.clearTimeout(this.V),this.V=null),this.u=null,this.i.destroy(),this.i=null,aa(this.c).forEach(function(a){a.destroy()}),this.b=this.c=null,this.a&&(this.a.destroy(),this.a=null),this.I.destroy(),this.v=this.h=this.U=this.f=this.g=this.Z=this.I=null},Se=te.prototype,Se.Wa=function(b,c){if(!this.L){var d=Error("Cannot call attach() right now.");return d.type="app",Promise.reject(d)}return this.v=b,this.f=c,this.U=b.qb(),la(this.i,this.g,"sourceopen",this.Ab.bind(this)),la(this.i,this.Z,"bandwidth",this.Wb.bind(this)),this.a.b&&(la(this.i,b,"bufferingStart",this.wb.bind(this)),la(this.i,b,"bufferingEnd",this.vb.bind(this))),d=this.f.mediaKeys,this.f.src=a.URL.createObjectURL(this.g),d=this.f.setMediaKeys(d),Promise.all([this.B,d])},Se.X=function(){if(this.L){var a=Error("Cannot call load() right now.");return a.type="app",Promise.reject(a)}return this.a&&0!=this.a.a.length?(a=this.a.a,he(a),ie(a),0==this.a.a.length||0==this.a.a[0].a.length?(a=Error("The manifest specifies content that cannot be displayed on this browser/platform."),a.type="stream",Promise.reject(a)):(this.L=!0,this.G.initialStreamBufferSize=this.a.c,Me(this),we(this),Promise.resolve())):(a=Error("The manifest does not specify any content."),a.type="stream",Promise.reject(a))},Se.ib=function(a){var b=Date.now(),c=this.V=null,d=this.a.g;(a?this.gb():this.hb(d)).then(xa(this,function(a){return c=new ke(a),c.update(this.a)})).then(xa(this,function(a){c.destroy(),c=null;for(var d=0;d<a.length;++d)ve(this,a[d]);this.G.initialStreamBufferSize=this.a.c,Me(this),we(this),0==Object.keys(this.c).length?Ae(this):ue(this,(Date.now()-b)/1e3)}))["catch"](xa(this,function(a){c&&(c.destroy(),c=null),"aborted"!=a.type&&(a=Z(a),this.dispatchEvent(a),this.a&&ue(this,0))}))},Se.hb=function(){return Promise.reject("Cannot update manifest with this VideoSource implementation.")},Se.gb=function(){return Promise.reject("Cannot update manifest with this VideoSource implementation.")},Se.ma=function(){if(!this.b.a.hasOwnProperty("video"))return[];for(var a=this.c.video,a=(a=a?a.oa():null)?a.C:0,b=[],c=this.b.get("video"),d=0;d<c.length;++d)for(var e=c[d],f=0;f<e.m.length;++f){var g=e.m[f];if(g.N&&g.J){var h=g.C,g=new o(h,g.bandwidth,g.width,g.height);h==a&&(g.active=!0),b.push(g)}}return b},te.prototype.getVideoTracks=te.prototype.ma,te.prototype.pa=function(){if(!this.b.a.hasOwnProperty("audio"))return[];for(var a=this.c.audio,a=(a=a?a.oa():null)?a.C:0,b=[],c=this.b.get("audio"),d=0;d<c.length;++d)for(var e=c[d],f=e.lang,g=0;g<e.m.length;++g){var h=e.m[g];if(h.N&&h.J){var j=h.C,h=new i(j,h.bandwidth,f);j==a&&(h.active=!0),b.push(h)}}return b},te.prototype.getAudioTracks=te.prototype.pa,te.prototype.Oa=function(){if(!this.b.a.hasOwnProperty("text"))return[];for(var a=this.c.text,b=a?a.oa():null,b=b?b.C:0,c=[],d=this.b.get("text"),e=0;e<d.length;++e)for(var f=d[e],g=f.lang,h=0;h<f.m.length;++h){var i=f.m[h].C,j=new n(i,g);i==b&&(j.active=!0,j.enabled=a.Da()),c.push(j)}return c},te.prototype.getTextTracks=te.prototype.Oa,te.prototype.ab=function(){return Number(this.G.initialStreamBufferSize)},te.prototype.bb=function(){var a;if(this.L){a=this.a.a[0];for(var b=[],c=0;c<a.a.length;++c)b.push.apply(b,ed(a.a[c]));a=b}else a=[];return a},te.prototype.Ka=function(a){if(this.L){for(var b={},c=this.a.a[0],d=0;d<c.a.length;++d){var e=c.a[d];b[e.C]=e}for(this.b.a={},c=ja(a),d=0;d<c.length;++d){var e=c[d],f=a.get(e);if("video"==e){var g=f[0].id;this.b.push(e,b[g])}else if("audio"==e)for(var g=f[0].b.split(";")[0],h=0;h<f.length;++h){var i=f[h];i.b.split(";")[0]==g&&this.b.push(e,b[i.id])}else for(h=0;h<f.length;++h)g=f[h].id,this.b.push(e,b[g])}this.fa=!0,(a=this.b.get("audio"))&&(ze(this,a),this.b.set("audio",a),a=a[0].lang||this.K,$(2,this.K,a)&&(this.fa=!1)),(a=this.b.get("text"))&&(ze(this,a),this.b.set("text",a),a=a[0].lang||this.K,$(2,this.K,a)||(this.fa=!1))}},te.prototype.selectVideoTrack=function(a,b,c){return ye(this,"video",a,b,c)},Se=te.prototype,Se.nb=function(a,b){return ye(this,"audio",a,b)},Se.ob=function(a,b){return ye(this,"text",a,b)},Se.Na=function(a){var b=this.c.text;b&&b.va(a)},Se.pb=function(a){this.$=a},Se.ua=function(){return[]},Se.ha=function(){return!1},Se.mb=function(){return this.a?this.a.b:!1},Se.fb=function(a){for(var b,c=!1,d=new ga,e=ha(this.b),f=0;f<e.length;++f)for(var g=e[f],h=0;h<g.m.length;++h){var i=g.m[h];i.f.forEach(function(a){d.push(a,i)})}for(b in a)if(e=cf[a[b]]||null,g=d.get(b))for(f=0;f<g.length;++f)i=g[f],h=i.N,i.N=!e,h!=i.N&&(c=!0);else sa(b);c&&(xe(this),b=this.pa(),a=this.ma(),b=this.b.a.hasOwnProperty("audio")&&0==b.length,a=this.b.a.hasOwnProperty("video")&&0==a.length,b||a)&&(a=Error("The key system has restricted all "+(b&&a?"audio and video tracks.":b?"audio tracks.":"video tracks.")),a.type="drm",a=Z(a),this.dispatchEvent(a))},Se.Ab=function(){this.i.sa(this.g,"sourceopen"),Ae(this).then(xa(this,function(){this.B&&this.B.resolve()}))["catch"](xa(this,function(a){this.B&&this.B.reject(a)}))},Se.ub=function(a){d(a&&a.length==Object.keys(this.c).length);for(var b=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,e=0;e<a.length;++e)var f=a[e],b=Math.min(b,f),c=Math.max(c,f);for(a=Je(this),e=0;e<a.length;++e)a[e].ka(c);Fe(this,a,c),e=ha(this.b).map(function(a){return a.m}).reduce(function(a,b){return a.concat(b)},[]).map(function(a){var b=[a.H.create()];return a.D&&b.push(a.D.create()),Promise.all(b)}),Promise.all(e).then(xa(this,function(a){for(var b=0;b<a.length;++b)a[b][0].ka(c);this.Ra=!0;for(var d in this.u)a=this.u[d],b=this.c[d],Hd(this.U,a.Pa),b.ra(a.Pa,a.Xa,a.Ya);this.u={}}))["catch"](xa(this,function(a){"aborted"!=a.type&&(a=Z(a),this.dispatchEvent(a))}))},Se.Mb=function(){this.Y=null,Le(this);var b=Ke(this,Je(this));b&&(this.a.b&&this.Ta!=b.A&&(this.Ta=b.A,null!=this.w&&(a.clearTimeout(this.w),this.w=null)),He(this,b.start,b.end),this.f.paused||Ie(this,this.f.currentTime,b.start,b.end))},Se.Ib=function(){var a=this.f.currentTime;if(null!=this.F){if(a>=this.F-.01&&a<=this.F+.01)return void(this.F=null);this.F=null}var b=Ke(this,Je(this));if(b){var c=b.end;if((b=Ie(this,a,b.start,c))||(c+.01>=a?b=!1:(this.f.currentTime=c,b=!0)),!b)for(var d in this.c)this.c[d].kb()}},Se.Kb=function(){if(!this.a.b){for(var a in this.c)if(!this.c[a].Ga())return;this.$a()}},Se.wb=function(){aa(this.c).every(function(a){return a.Ga()})&&(this.w=a.setTimeout(this.$a.bind(this),1e3*this.Ua))},Se.vb=function(){null!=this.w&&(a.clearTimeout(this.w),this.w=null)},Se.Wb=function(){var a=this.U,b=this.Z.getBandwidth();a.estimatedBandwidth=b,a.bandwidthHistory.push(new Jd(b))},Se.$a=function(){this.w=null,this.g.endOfStream()},c(Ne,te),b("shaka.player.DashVideoSource",Ne),Ne.prototype.Aa=function(a,b,c){this.R.push(a),this.ga.push(b||""),this.ta.push(c||"")},Ne.prototype.addExternalCaptions=Ne.prototype.Aa,Ne.prototype.xa=function(a){this.j=a},Ne.prototype.setNetworkCallback=Ne.prototype.xa,Ne.prototype.destroy=function(){this.l=this.j=this.M=null,te.prototype.destroy.call(this)},Ne.prototype.X=function(){var a=new zc(this.j,[new Ab(this.za)]);return Ec(new Dc(a,this.da)).then(xa(this,function(a){this.l=a;for(var b=0;b<this.R.length;b++){var c=a,d=this.R[b],e=this.ga[b],f=this.ta[b];if(0!==c.a.length){var g=new Lb;g.contentType="text",g.lang=e||"en",g.c=!0,e=new Ob,e.bandwidth=0,e.f=f||"text/vtt",e.s=[new Ab(d)],g.a.push(e),c.a[0].b.push(g),ac(c.a[0])}}return this.a=vd(new ud(this.M),a,this.j),te.prototype.X.call(this)}))},Ne.prototype.hb=function(a){return Ec(new Dc(a,this.da)).then(xa(this,function(a){return this.l=a,a=vd(new ud(this.M),a,this.j),Promise.resolve(a)}))},Ne.prototype.gb=function(){var a=vd(new ud(this.M),this.l,this.j);return Promise.resolve(a)},c(Oe,te),b("shaka.player.OfflineVideoSource",Oe),Oe.prototype.T=function(a){null!=a.licenseRequestTimeout&&(this.l.licenseRequestTimeout=a.licenseRequestTimeout),null!=a.segmentRequestTimeout&&(this.l.segmentRequestTimeout=a.segmentRequestTimeout),te.prototype.T.call(this,a)},b("shaka.player.OfflineVideoSource.retrieveGroupIds",function(){var a=new Ha,b=za(a).then(function(){return Ia(a)});return b.then(function(){Aa(a)})["catch"](function(){Aa(a)}),b}),Oe.prototype.xa=function(b,c,d,e){var f,g=null,h={},i=[];return b=new zc(this.ga,[new Ab(b)]),Ec(new Dc(b,this.da)).then(xa(this,function(a){return this.a=vd(new ud(d),a,this.ga),this.a.b?(a=Error("Unable to store live streams offline."),a.type="app",Promise.reject(a)):(this.T({preferredLanguage:c}),te.prototype.X.call(this))})).then(xa(this,function(){var b=document.createElement("video");return b.src=a.URL.createObjectURL(this.g),f=new Td(null,b,this),null!=this.l.licenseRequestTimeout&&(f.w=Number(this.l.licenseRequestTimeout)),la(this.i,f,"sessionReady",this.ta.bind(this)),la(this.i,f,"error",function(a){g=a}),f.initialize()})).then(xa(this,function(){for(var a=ha(this.b),b=0;b<a.length;++b)for(var c=a[b],d=0;d<c.m.length;++d){var f=c.m[d];h[f.C]=f}return e()})).then(xa(this,function(a){for(var b=0;b<a.length;++b){var c=a[b],d=h[c];if(!d)return Promise.reject(Error("Invalid stream ID chosen: "+c));i.push(d)}var e=["audio","video"];return i=i.filter(function(a){return!(0>e.indexOf(a.a.split("/")[0]))}),a=i.map(function(a){return a.D.create()}),Promise.all(a)})).then(xa(this,function(a){for(var b=i,c=[],d=0;d<b.length;++d)try{c[d]=this.g.addSourceBuffer(cd(b[d]))}catch(e){}if(b.length!=c.length)a=Error("Error initializing streams."),a.type="storage",a=Promise.reject(a);else{for(d=0;d<a.length;++d)(b=a[d])&&c[d].appendBuffer(b);a=Promise.resolve()}return a})).then(xa(this,function(){return Ud(f,this.timeoutMs)})).then(xa(this,function(){return g?Promise.reject(g):Pe(this,i,f.a,this.a.a[0].b)})).then(xa(this,function(a){return this.R=a,g?(Qe(this),Promise.reject(g)):Promise.resolve(a)}))},b("shaka.player.OfflineVideoSource.prototype.store",Oe.prototype.xa),Oe.prototype.Aa=function(a){this.ga=a},Oe.prototype.setNetworkCallback=Oe.prototype.Aa,Oe.prototype.ta=function(a){this.M.push(a.detail.sessionId)},Oe.prototype.X=function(){var a,b,c=new Ha;return za(c).then(xa(this,function(){return Ja(c,this.R)})).then(xa(this,function(d){var e=[];this.M=d.session_ids,a=d.duration,b={keySystem:d.key_system,distinctiveIdentifierRequired:d.distinctive_identifier,persistentStorageRequired:!0,audioRobustness:d.audio_robustness,videoRobustness:d.video_robustness,withCredentials:d.with_credentials,licenseServerUrl:d.license_server};for(var f=0;f<d.stream_ids.length;++f)e.push(Ka(c,d.stream_ids[f]));return Promise.all(e)})).then(xa(this,function(c){var d=a,e=b,f=new gd;f.c=5;for(var g=new fd,h=0;h<c.length;++h){var i=c[h],j=new bd,k=new ad(i.references),l=new Jc(null,i.init_segment);j.H=k,j.D=l,j.a=i.mime_type,j.b=i.codecs,j.N=!0,this.j&&(null!=this.j.licenseServerUrl&&(e.licenseServerUrl=this.j.licenseServerUrl),null!=this.j.withCredentials&&(e.withCredentials=this.j.withCredentials),e.licensePostProcessor=this.j.licensePostProcessor,e.licensePreProcessor=this.j.licensePreProcessor,e.serverCertificate=this.j.serverCertificate),i=_a(e),k=new dd,k.m.push(j),k.a.push(i),k.contentType=j.a.split("/")[0],g.a.push(k),g.b=d}return f.a.push(g),this.a=f,te.prototype.X.call(this)})).then(function(){return Aa(c),Promise.resolve()})["catch"](function(a){return Aa(c),Promise.reject(a)})},Oe.prototype.za=function(a,b){a&&(this.j={licenseServerUrl:a.licenseServerUrl,withCredentials:a.withCredentials,serverCertificate:a.serverCertificate,licensePreProcessor:a.licensePreProcessor,licensePostProcessor:a.licensePostProcessor});var c=null;return Re(this)["catch"](function(a){return b?(c=a,Promise.resolve()):Promise.reject(a)}).then(xa(this,function(){return Qe(this)})).then(function(){return Promise.resolve(c)})},Oe.prototype.deleteGroup=Oe.prototype.za,Oe.prototype.ua=function(){return this.M},Oe.prototype.ha=function(){return!0}}).bind(e,this)(),"undefined"!=typeof a&&a.exports?a.exports=e.shaka:(d=function(){return e.shaka}.call(b,c,b,a),!(void 0!==d&&(a.exports=d)))}()}});